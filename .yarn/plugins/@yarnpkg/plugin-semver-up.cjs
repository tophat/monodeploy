/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-semver-up",
factory: function (require) {
var plugin=(()=>{var an=Object.create,Ge=Object.defineProperty,on=Object.defineProperties,un=Object.getOwnPropertyDescriptor,ln=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertyNames,Ut=Object.getOwnPropertySymbols,fn=Object.getPrototypeOf,Mt=Object.prototype.hasOwnProperty,pn=Object.prototype.propertyIsEnumerable;var qt=(t,e,r)=>e in t?Ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,P=(t,e)=>{for(var r in e||(e={}))Mt.call(e,r)&&qt(t,r,e[r]);if(Ut)for(var r of Ut(e))pn.call(e,r)&&qt(t,r,e[r]);return t},j=(t,e)=>on(t,ln(e)),hn=t=>Ge(t,"__esModule",{value:!0});var Ee=t=>{if(typeof require!="undefined")return require(t);throw new Error('Dynamic require of "'+t+'" is not supported')};var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),gn=(t,e)=>{for(var r in e)Ge(t,r,{get:e[r],enumerable:!0})},En=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of cn(e))!Mt.call(t,s)&&s!=="default"&&Ge(t,s,{get:()=>e[s],enumerable:!(r=un(e,s))||r.enumerable});return t},Ce=t=>En(hn(Ge(t!=null?an(fn(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Je=T(ae=>{"use strict";ae.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1;ae.find=(t,e)=>t.nodes.find(r=>r.type===e);ae.exceedsLimit=(t,e,r=1,s)=>s===!1||!ae.isInteger(t)||!ae.isInteger(e)?!1:(Number(e)-Number(t))/Number(r)>=s;ae.escapeNode=(t,e=0,r)=>{let s=t.nodes[e];!s||(r&&s.type===r||s.type==="open"||s.type==="close")&&s.escaped!==!0&&(s.value="\\"+s.value,s.escaped=!0)};ae.encloseBrace=t=>t.type!=="brace"?!1:t.commas>>0+t.ranges>>0==0?(t.invalid=!0,!0):!1;ae.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:t.commas>>0+t.ranges>>0==0||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1;ae.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0;ae.reduce=t=>t.reduce((e,r)=>(r.type==="text"&&e.push(r.value),r.type==="range"&&(r.type="text"),e),[]);ae.flatten=(...t)=>{let e=[],r=s=>{for(let n=0;n<s.length;n++){let i=s[n];Array.isArray(i)?r(i,e):i!==void 0&&e.push(i)}return e};return r(t),e}});var et=T((Fa,Bt)=>{"use strict";var kt=Je();Bt.exports=(t,e={})=>{let r=(s,n={})=>{let i=e.escapeInvalid&&kt.isInvalidBrace(n),a=s.invalid===!0&&e.escapeInvalid===!0,o="";if(s.value)return(i||a)&&kt.isOpenOrClose(s)?"\\"+s.value:s.value;if(s.value)return s.value;if(s.nodes)for(let u of s.nodes)o+=r(u);return o};return r(t)}});var Xt=T((Xa,Ft)=>{"use strict";Ft.exports=function(t){return typeof t=="number"?t-t==0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1}});var Jt=T((ja,zt)=>{"use strict";var jt=Xt(),Se=(t,e,r)=>{if(jt(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(jt(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let s=P({relaxZeros:!0},r);typeof s.strictZeros=="boolean"&&(s.relaxZeros=s.strictZeros===!1);let n=String(s.relaxZeros),i=String(s.shorthand),a=String(s.capture),o=String(s.wrap),u=t+":"+e+"="+n+i+a+o;if(Se.cache.hasOwnProperty(u))return Se.cache[u].result;let g=Math.min(t,e),h=Math.max(t,e);if(Math.abs(g-h)===1){let d=t+"|"+e;return s.capture?`(${d})`:s.wrap===!1?d:`(?:${d})`}let E=Yt(t)||Yt(e),f={min:t,max:e,a:g,b:h},C=[],$=[];if(E&&(f.isPadded=E,f.maxLen=String(f.max).length),g<0){let d=h<0?Math.abs(h):1;$=Wt(d,Math.abs(g),f,s),g=f.a=0}return h>=0&&(C=Wt(g,h,f,s)),f.negatives=$,f.positives=C,f.result=Rn($,C,s),s.capture===!0?f.result=`(${f.result})`:s.wrap!==!1&&C.length+$.length>1&&(f.result=`(?:${f.result})`),Se.cache[u]=f,f.result};function Rn(t,e,r){let s=ft(t,e,"-",!1,r)||[],n=ft(e,t,"",!1,r)||[],i=ft(t,e,"-?",!0,r)||[];return s.concat(i).concat(n).join("|")}function An(t,e){let r=1,s=1,n=Vt(t,r),i=new Set([e]);for(;t<=n&&n<=e;)i.add(n),r+=1,n=Vt(t,r);for(n=Qt(e+1,s)-1;t<n&&n<=e;)i.add(n),s+=1,n=Qt(e+1,s)-1;return i=[...i],i.sort(mn),i}function dn(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let s=yn(t,e),n=s.length,i="",a=0;for(let o=0;o<n;o++){let[u,g]=s[o];u===g?i+=u:u!=="0"||g!=="9"?i+=$n(u,g,r):a++}return a&&(i+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:i,count:[a],digits:n}}function Wt(t,e,r,s){let n=An(t,e),i=[],a=t,o;for(let u=0;u<n.length;u++){let g=n[u],h=dn(String(a),String(g),s),E="";if(!r.isPadded&&o&&o.pattern===h.pattern){o.count.length>1&&o.count.pop(),o.count.push(h.count[0]),o.string=o.pattern+Zt(o.count),a=g+1;continue}r.isPadded&&(E=vn(g,r,s)),h.string=E+h.pattern+Zt(h.count),i.push(h),a=g+1,o=h}return i}function ft(t,e,r,s,n){let i=[];for(let a of t){let{string:o}=a;!s&&!Kt(e,"string",o)&&i.push(r+o),s&&Kt(e,"string",o)&&i.push(r+o)}return i}function yn(t,e){let r=[];for(let s=0;s<t.length;s++)r.push([t[s],e[s]]);return r}function mn(t,e){return t>e?1:e>t?-1:0}function Kt(t,e,r){return t.some(s=>s[e]===r)}function Vt(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function Qt(t,e){return t-t%Math.pow(10,e)}function Zt(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function $n(t,e,r){return`[${t}${e-t==1?"":"-"}${e}]`}function Yt(t){return/^-?(0+)\d/.test(t)}function vn(t,e,r){if(!e.isPadded)return t;let s=Math.abs(e.maxLen-String(t).length),n=r.relaxZeros!==!1;switch(s){case 0:return"";case 1:return n?"0?":"0";case 2:return n?"0{0,2}":"00";default:return n?`0{0,${s}}`:`0{${s}}`}}Se.cache={};Se.clearCache=()=>Se.cache={};zt.exports=Se});var gt=T((Wa,or)=>{"use strict";var Cn=Ee("util"),er=Jt(),tr=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),Sn=t=>e=>t===!0?Number(e):String(e),pt=t=>typeof t=="number"||typeof t=="string"&&t!=="",Ue=t=>Number.isInteger(+t),ht=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},xn=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,_n=(t,e,r)=>{if(e>0){let s=t[0]==="-"?"-":"";s&&(t=t.slice(1)),t=s+t.padStart(s?e-1:e,"0")}return r===!1?String(t):t},rr=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},Tn=(t,e)=>{t.negatives.sort((a,o)=>a<o?-1:a>o?1:0),t.positives.sort((a,o)=>a<o?-1:a>o?1:0);let r=e.capture?"":"?:",s="",n="",i;return t.positives.length&&(s=t.positives.join("|")),t.negatives.length&&(n=`-(${r}${t.negatives.join("|")})`),s&&n?i=`${s}|${n}`:i=s||n,e.wrap?`(${r}${i})`:i},sr=(t,e,r,s)=>{if(r)return er(t,e,P({wrap:!1},s));let n=String.fromCharCode(t);if(t===e)return n;let i=String.fromCharCode(e);return`[${n}-${i}]`},nr=(t,e,r)=>{if(Array.isArray(t)){let s=r.wrap===!0,n=r.capture?"":"?:";return s?`(${n}${t.join("|")})`:t.join("|")}return er(t,e,r)},ir=(...t)=>new RangeError("Invalid range arguments: "+Cn.inspect(...t)),ar=(t,e,r)=>{if(r.strictRanges===!0)throw ir([t,e]);return[]},In=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},bn=(t,e,r=1,s={})=>{let n=Number(t),i=Number(e);if(!Number.isInteger(n)||!Number.isInteger(i)){if(s.strictRanges===!0)throw ir([t,e]);return[]}n===0&&(n=0),i===0&&(i=0);let a=n>i,o=String(t),u=String(e),g=String(r);r=Math.max(Math.abs(r),1);let h=ht(o)||ht(u)||ht(g),E=h?Math.max(o.length,u.length,g.length):0,f=h===!1&&xn(t,e,s)===!1,C=s.transform||Sn(f);if(s.toRegex&&r===1)return sr(rr(t,E),rr(e,E),!0,s);let $={negatives:[],positives:[]},d=O=>$[O<0?"negatives":"positives"].push(Math.abs(O)),v=[],_=0;for(;a?n>=i:n<=i;)s.toRegex===!0&&r>1?d(n):v.push(_n(C(n,_),E,f)),n=a?n-r:n+r,_++;return s.toRegex===!0?r>1?Tn($,s):nr(v,null,P({wrap:!1},s)):v},Nn=(t,e,r=1,s={})=>{if(!Ue(t)&&t.length>1||!Ue(e)&&e.length>1)return ar(t,e,s);let n=s.transform||(f=>String.fromCharCode(f)),i=`${t}`.charCodeAt(0),a=`${e}`.charCodeAt(0),o=i>a,u=Math.min(i,a),g=Math.max(i,a);if(s.toRegex&&r===1)return sr(u,g,!1,s);let h=[],E=0;for(;o?i>=a:i<=a;)h.push(n(i,E)),i=o?i-r:i+r,E++;return s.toRegex===!0?nr(h,null,{wrap:!1,options:s}):h},tt=(t,e,r,s={})=>{if(e==null&&pt(t))return[t];if(!pt(t)||!pt(e))return ar(t,e,s);if(typeof r=="function")return tt(t,e,1,{transform:r});if(tr(r))return tt(t,e,0,r);let n=P({},s);return n.capture===!0&&(n.wrap=!0),r=r||n.step||1,Ue(r)?Ue(t)&&Ue(e)?bn(t,e,r,n):Nn(t,e,Math.max(Math.abs(r),1),n):r!=null&&!tr(r)?In(r,n):tt(t,e,1,r)};or.exports=tt});var cr=T((Ka,lr)=>{"use strict";var Ln=gt(),ur=Je(),On=(t,e={})=>{let r=(s,n={})=>{let i=ur.isInvalidBrace(n),a=s.invalid===!0&&e.escapeInvalid===!0,o=i===!0||a===!0,u=e.escapeInvalid===!0?"\\":"",g="";if(s.isOpen===!0||s.isClose===!0)return u+s.value;if(s.type==="open")return o?u+s.value:"(";if(s.type==="close")return o?u+s.value:")";if(s.type==="comma")return s.prev.type==="comma"?"":o?s.value:"|";if(s.value)return s.value;if(s.nodes&&s.ranges>0){let h=ur.reduce(s.nodes),E=Ln(...h,j(P({},e),{wrap:!1,toRegex:!0}));if(E.length!==0)return h.length>1&&E.length>1?`(${E})`:E}if(s.nodes)for(let h of s.nodes)g+=r(h,s);return g};return r(t)};lr.exports=On});var hr=T((Va,pr)=>{"use strict";var wn=gt(),fr=et(),Ne=Je(),xe=(t="",e="",r=!1)=>{let s=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?Ne.flatten(e).map(n=>`{${n}}`):e;for(let n of t)if(Array.isArray(n))for(let i of n)s.push(xe(i,e,r));else for(let i of e)r===!0&&typeof i=="string"&&(i=`{${i}}`),s.push(Array.isArray(i)?xe(n,i,r):n+i);return Ne.flatten(s)},Hn=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,s=(n,i={})=>{n.queue=[];let a=i,o=i.queue;for(;a.type!=="brace"&&a.type!=="root"&&a.parent;)a=a.parent,o=a.queue;if(n.invalid||n.dollar){o.push(xe(o.pop(),fr(n,e)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){o.push(xe(o.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){let E=Ne.reduce(n.nodes);if(Ne.exceedsLimit(...E,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let f=wn(...E,e);f.length===0&&(f=fr(n,e)),o.push(xe(o.pop(),f)),n.nodes=[];return}let u=Ne.encloseBrace(n),g=n.queue,h=n;for(;h.type!=="brace"&&h.type!=="root"&&h.parent;)h=h.parent,g=h.queue;for(let E=0;E<n.nodes.length;E++){let f=n.nodes[E];if(f.type==="comma"&&n.type==="brace"){E===1&&g.push(""),g.push("");continue}if(f.type==="close"){o.push(xe(o.pop(),g,u));continue}if(f.value&&f.type!=="open"){g.push(xe(g.pop(),f.value));continue}f.nodes&&s(f,n)}return g};return Ne.flatten(s(t))};pr.exports=Hn});var Er=T((Qa,gr)=>{"use strict";gr.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var mr=T((Za,yr)=>{"use strict";var Pn=et(),{MAX_LENGTH:Rr,CHAR_BACKSLASH:Et,CHAR_BACKTICK:Dn,CHAR_COMMA:Gn,CHAR_DOT:Un,CHAR_LEFT_PARENTHESES:Mn,CHAR_RIGHT_PARENTHESES:qn,CHAR_LEFT_CURLY_BRACE:kn,CHAR_RIGHT_CURLY_BRACE:Bn,CHAR_LEFT_SQUARE_BRACKET:Ar,CHAR_RIGHT_SQUARE_BRACKET:dr,CHAR_DOUBLE_QUOTE:Fn,CHAR_SINGLE_QUOTE:Xn,CHAR_NO_BREAK_SPACE:jn,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Wn}=Er(),Kn=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let r=e||{},s=typeof r.maxLength=="number"?Math.min(Rr,r.maxLength):Rr;if(t.length>s)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${s})`);let n={type:"root",input:t,nodes:[]},i=[n],a=n,o=n,u=0,g=t.length,h=0,E=0,f,C={},$=()=>t[h++],d=v=>{if(v.type==="text"&&o.type==="dot"&&(o.type="text"),o&&o.type==="text"&&v.type==="text"){o.value+=v.value;return}return a.nodes.push(v),v.parent=a,v.prev=o,o=v,v};for(d({type:"bos"});h<g;)if(a=i[i.length-1],f=$(),!(f===Wn||f===jn)){if(f===Et){d({type:"text",value:(e.keepEscaping?f:"")+$()});continue}if(f===dr){d({type:"text",value:"\\"+f});continue}if(f===Ar){u++;let v=!0,_;for(;h<g&&(_=$());){if(f+=_,_===Ar){u++;continue}if(_===Et){f+=$();continue}if(_===dr&&(u--,u===0))break}d({type:"text",value:f});continue}if(f===Mn){a=d({type:"paren",nodes:[]}),i.push(a),d({type:"text",value:f});continue}if(f===qn){if(a.type!=="paren"){d({type:"text",value:f});continue}a=i.pop(),d({type:"text",value:f}),a=i[i.length-1];continue}if(f===Fn||f===Xn||f===Dn){let v=f,_;for(e.keepQuotes!==!0&&(f="");h<g&&(_=$());){if(_===Et){f+=_+$();continue}if(_===v){e.keepQuotes===!0&&(f+=_);break}f+=_}d({type:"text",value:f});continue}if(f===kn){E++;let v=o.value&&o.value.slice(-1)==="$"||a.dollar===!0;a=d({type:"brace",open:!0,close:!1,dollar:v,depth:E,commas:0,ranges:0,nodes:[]}),i.push(a),d({type:"open",value:f});continue}if(f===Bn){if(a.type!=="brace"){d({type:"text",value:f});continue}let v="close";a=i.pop(),a.close=!0,d({type:v,value:f}),E--,a=i[i.length-1];continue}if(f===Gn&&E>0){if(a.ranges>0){a.ranges=0;let v=a.nodes.shift();a.nodes=[v,{type:"text",value:Pn(a)}]}d({type:"comma",value:f}),a.commas++;continue}if(f===Un&&E>0&&a.commas===0){let v=a.nodes;if(E===0||v.length===0){d({type:"text",value:f});continue}if(o.type==="dot"){if(a.range=[],o.value+=f,o.type="range",a.nodes.length!==3&&a.nodes.length!==5){a.invalid=!0,a.ranges=0,o.type="text";continue}a.ranges++,a.args=[];continue}if(o.type==="range"){v.pop();let _=v[v.length-1];_.value+=o.value+f,o=_,a.ranges--;continue}d({type:"dot",value:f});continue}d({type:"text",value:f})}do if(a=i.pop(),a.type!=="root"){a.nodes.forEach(O=>{O.nodes||(O.type==="open"&&(O.isOpen=!0),O.type==="close"&&(O.isClose=!0),O.nodes||(O.type="text"),O.invalid=!0)});let v=i[i.length-1],_=v.nodes.indexOf(a);v.nodes.splice(_,1,...a.nodes)}while(i.length>0);return d({type:"eos"}),n};yr.exports=Kn});var Cr=T((Ya,vr)=>{"use strict";var $r=et(),Vn=cr(),Qn=hr(),Zn=mr(),ne=(t,e={})=>{let r=[];if(Array.isArray(t))for(let s of t){let n=ne.create(s,e);Array.isArray(n)?r.push(...n):r.push(n)}else r=[].concat(ne.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};ne.parse=(t,e={})=>Zn(t,e);ne.stringify=(t,e={})=>typeof t=="string"?$r(ne.parse(t,e),e):$r(t,e);ne.compile=(t,e={})=>(typeof t=="string"&&(t=ne.parse(t,e)),Vn(t,e));ne.expand=(t,e={})=>{typeof t=="string"&&(t=ne.parse(t,e));let r=Qn(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r};ne.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?ne.compile(t,e):ne.expand(t,e);vr.exports=ne});var Me=T((za,Ir)=>{"use strict";var Yn=Ee("path"),fe="\\\\/",Sr=`[^${fe}]`,Re="\\.",zn="\\+",Jn="\\?",rt="\\/",ei="(?=.)",xr="[^/]",Rt=`(?:${rt}|$)`,_r=`(?:^|${rt})`,At=`${Re}{1,2}${Rt}`,ti=`(?!${Re})`,ri=`(?!${_r}${At})`,si=`(?!${Re}{0,1}${Rt})`,ni=`(?!${At})`,ii=`[^.${rt}]`,ai=`${xr}*?`,Tr={DOT_LITERAL:Re,PLUS_LITERAL:zn,QMARK_LITERAL:Jn,SLASH_LITERAL:rt,ONE_CHAR:ei,QMARK:xr,END_ANCHOR:Rt,DOTS_SLASH:At,NO_DOT:ti,NO_DOTS:ri,NO_DOT_SLASH:si,NO_DOTS_SLASH:ni,QMARK_NO_DOT:ii,STAR:ai,START_ANCHOR:_r},oi=j(P({},Tr),{SLASH_LITERAL:`[${fe}]`,QMARK:Sr,STAR:`${Sr}*?`,DOTS_SLASH:`${Re}{1,2}(?:[${fe}]|$)`,NO_DOT:`(?!${Re})`,NO_DOTS:`(?!(?:^|[${fe}])${Re}{1,2}(?:[${fe}]|$))`,NO_DOT_SLASH:`(?!${Re}{0,1}(?:[${fe}]|$))`,NO_DOTS_SLASH:`(?!${Re}{1,2}(?:[${fe}]|$))`,QMARK_NO_DOT:`[^.${fe}]`,START_ANCHOR:`(?:^|[${fe}])`,END_ANCHOR:`(?:[${fe}]|$)`}),ui={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};Ir.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:ui,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Yn.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?oi:Tr}}});var qe=T(ee=>{"use strict";var li=Ee("path"),ci=process.platform==="win32",{REGEX_BACKSLASH:fi,REGEX_REMOVE_BACKSLASH:pi,REGEX_SPECIAL_CHARS:hi,REGEX_SPECIAL_CHARS_GLOBAL:gi}=Me();ee.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);ee.hasRegexChars=t=>hi.test(t);ee.isRegexChar=t=>t.length===1&&ee.hasRegexChars(t);ee.escapeRegex=t=>t.replace(gi,"\\$1");ee.toPosixSlashes=t=>t.replace(fi,"/");ee.removeBackslashes=t=>t.replace(pi,e=>e==="\\"?"":e);ee.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};ee.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:ci===!0||li.sep==="\\";ee.escapeLast=(t,e,r)=>{let s=t.lastIndexOf(e,r);return s===-1?t:t[s-1]==="\\"?ee.escapeLast(t,e,s-1):`${t.slice(0,s)}\\${t.slice(s)}`};ee.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};ee.wrapOutput=(t,e={},r={})=>{let s=r.contains?"":"^",n=r.contains?"":"$",i=`${s}(?:${t})${n}`;return e.negated===!0&&(i=`(?:^(?!${i}).*$)`),i}});var Dr=T((eo,Pr)=>{"use strict";var br=qe(),{CHAR_ASTERISK:dt,CHAR_AT:Ei,CHAR_BACKWARD_SLASH:ke,CHAR_COMMA:Ri,CHAR_DOT:yt,CHAR_EXCLAMATION_MARK:mt,CHAR_FORWARD_SLASH:Nr,CHAR_LEFT_CURLY_BRACE:$t,CHAR_LEFT_PARENTHESES:vt,CHAR_LEFT_SQUARE_BRACKET:Ai,CHAR_PLUS:di,CHAR_QUESTION_MARK:Lr,CHAR_RIGHT_CURLY_BRACE:yi,CHAR_RIGHT_PARENTHESES:Or,CHAR_RIGHT_SQUARE_BRACKET:mi}=Me(),wr=t=>t===Nr||t===ke,Hr=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?Infinity:1)},$i=(t,e)=>{let r=e||{},s=t.length-1,n=r.parts===!0||r.scanToEnd===!0,i=[],a=[],o=[],u=t,g=-1,h=0,E=0,f=!1,C=!1,$=!1,d=!1,v=!1,_=!1,O=!1,w=!1,re=!1,V=!1,ye=0,Q,S,H={value:"",depth:0,isGlob:!1},K=()=>g>=s,p=()=>u.charCodeAt(g+1),M=()=>(Q=S,u.charCodeAt(++g));for(;g<s;){S=M();let Z;if(S===ke){O=H.backslashes=!0,S=M(),S===$t&&(_=!0);continue}if(_===!0||S===$t){for(ye++;K()!==!0&&(S=M());){if(S===ke){O=H.backslashes=!0,M();continue}if(S===$t){ye++;continue}if(_!==!0&&S===yt&&(S=M())===yt){if(f=H.isBrace=!0,$=H.isGlob=!0,V=!0,n===!0)continue;break}if(_!==!0&&S===Ri){if(f=H.isBrace=!0,$=H.isGlob=!0,V=!0,n===!0)continue;break}if(S===yi&&(ye--,ye===0)){_=!1,f=H.isBrace=!0,V=!0;break}}if(n===!0)continue;break}if(S===Nr){if(i.push(g),a.push(H),H={value:"",depth:0,isGlob:!1},V===!0)continue;if(Q===yt&&g===h+1){h+=2;continue}E=g+1;continue}if(r.noext!==!0&&(S===di||S===Ei||S===dt||S===Lr||S===mt)===!0&&p()===vt){if($=H.isGlob=!0,d=H.isExtglob=!0,V=!0,S===mt&&g===h&&(re=!0),n===!0){for(;K()!==!0&&(S=M());){if(S===ke){O=H.backslashes=!0,S=M();continue}if(S===Or){$=H.isGlob=!0,V=!0;break}}continue}break}if(S===dt){if(Q===dt&&(v=H.isGlobstar=!0),$=H.isGlob=!0,V=!0,n===!0)continue;break}if(S===Lr){if($=H.isGlob=!0,V=!0,n===!0)continue;break}if(S===Ai){for(;K()!==!0&&(Z=M());){if(Z===ke){O=H.backslashes=!0,M();continue}if(Z===mi){C=H.isBracket=!0,$=H.isGlob=!0,V=!0;break}}if(n===!0)continue;break}if(r.nonegate!==!0&&S===mt&&g===h){w=H.negated=!0,h++;continue}if(r.noparen!==!0&&S===vt){if($=H.isGlob=!0,n===!0){for(;K()!==!0&&(S=M());){if(S===vt){O=H.backslashes=!0,S=M();continue}if(S===Or){V=!0;break}}continue}break}if($===!0){if(V=!0,n===!0)continue;break}}r.noext===!0&&(d=!1,$=!1);let G=u,me="",l="";h>0&&(me=u.slice(0,h),u=u.slice(h),E-=h),G&&$===!0&&E>0?(G=u.slice(0,E),l=u.slice(E)):$===!0?(G="",l=u):G=u,G&&G!==""&&G!=="/"&&G!==u&&wr(G.charCodeAt(G.length-1))&&(G=G.slice(0,-1)),r.unescape===!0&&(l&&(l=br.removeBackslashes(l)),G&&O===!0&&(G=br.removeBackslashes(G)));let c={prefix:me,input:t,start:h,base:G,glob:l,isBrace:f,isBracket:C,isGlob:$,isExtglob:d,isGlobstar:v,negated:w,negatedExtglob:re};if(r.tokens===!0&&(c.maxDepth=0,wr(S)||a.push(H),c.tokens=a),r.parts===!0||r.tokens===!0){let Z;for(let N=0;N<i.length;N++){let le=Z?Z+1:h,ce=i[N],se=t.slice(le,ce);r.tokens&&(N===0&&h!==0?(a[N].isPrefix=!0,a[N].value=me):a[N].value=se,Hr(a[N]),c.maxDepth+=a[N].depth),(N!==0||se!=="")&&o.push(se),Z=ce}if(Z&&Z+1<t.length){let N=t.slice(Z+1);o.push(N),r.tokens&&(a[a.length-1].value=N,Hr(a[a.length-1]),c.maxDepth+=a[a.length-1].depth)}c.slashes=i,c.parts=o}return c};Pr.exports=$i});var Mr=T((to,Ur)=>{"use strict";var st=Me(),ie=qe(),{MAX_LENGTH:nt,POSIX_REGEX_SOURCE:vi,REGEX_NON_SPECIAL_CHARS:Ci,REGEX_SPECIAL_CHARS_BACKREF:Si,REPLACEMENTS:Gr}=st,xi=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch(s){return t.map(n=>ie.escapeRegex(n)).join("..")}return r},Le=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,Ct=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=Gr[t]||t;let r=P({},e),s=typeof r.maxLength=="number"?Math.min(nt,r.maxLength):nt,n=t.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);let i={type:"bos",value:"",output:r.prepend||""},a=[i],o=r.capture?"":"?:",u=ie.isWindows(e),g=st.globChars(u),h=st.extglobChars(g),{DOT_LITERAL:E,PLUS_LITERAL:f,SLASH_LITERAL:C,ONE_CHAR:$,DOTS_SLASH:d,NO_DOT:v,NO_DOT_SLASH:_,NO_DOTS_SLASH:O,QMARK:w,QMARK_NO_DOT:re,STAR:V,START_ANCHOR:ye}=g,Q=A=>`(${o}(?:(?!${ye}${A.dot?d:E}).)*?)`,S=r.dot?"":v,H=r.dot?w:re,K=r.bash===!0?Q(r):V;r.capture&&(K=`(${K})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let p={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};t=ie.removePrefix(t,p),n=t.length;let M=[],G=[],me=[],l=i,c,Z=()=>p.index===n-1,N=p.peek=(A=1)=>t[p.index+A],le=p.advance=()=>t[++p.index]||"",ce=()=>t.slice(p.index+1),se=(A="",U=0)=>{p.consumed+=A,p.index+=U},Qe=A=>{p.output+=A.output!=null?A.output:A.value,se(A.value)},sn=()=>{let A=1;for(;N()==="!"&&(N(2)!=="("||N(3)==="?");)le(),p.start++,A++;return A%2==0?!1:(p.negated=!0,p.start++,!0)},Ze=A=>{p[A]++,me.push(A)},ve=A=>{p[A]--,me.pop()},b=A=>{if(l.type==="globstar"){let U=p.braces>0&&(A.type==="comma"||A.type==="brace"),R=A.extglob===!0||M.length&&(A.type==="pipe"||A.type==="paren");A.type!=="slash"&&A.type!=="paren"&&!U&&!R&&(p.output=p.output.slice(0,-l.output.length),l.type="star",l.value="*",l.output=K,p.output+=l.output)}if(M.length&&A.type!=="paren"&&(M[M.length-1].inner+=A.value),(A.value||A.output)&&Qe(A),l&&l.type==="text"&&A.type==="text"){l.value+=A.value,l.output=(l.output||"")+A.value;return}A.prev=l,a.push(A),l=A},Ye=(A,U)=>{let R=j(P({},h[U]),{conditions:1,inner:""});R.prev=l,R.parens=p.parens,R.output=p.output;let I=(r.capture?"(":"")+R.open;Ze("parens"),b({type:A,value:U,output:p.output?"":$}),b({type:"paren",extglob:!0,value:le(),output:I}),M.push(R)},nn=A=>{let U=A.close+(r.capture?")":""),R;if(A.type==="negate"){let I=K;if(A.inner&&A.inner.length>1&&A.inner.includes("/")&&(I=Q(r)),(I!==K||Z()||/^\)+$/.test(ce()))&&(U=A.close=`)$))${I}`),A.inner.includes("*")&&(R=ce())&&/^\.[^\\/.]+$/.test(R)){let k=Ct(R,j(P({},e),{fastpaths:!1})).output;U=A.close=`)${k})${I})`}A.prev.type==="bos"&&(p.negatedExtglob=!0)}b({type:"paren",extglob:!0,value:c,output:U}),ve("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let A=!1,U=t.replace(Si,(R,I,k,Y,X,ct)=>Y==="\\"?(A=!0,R):Y==="?"?I?I+Y+(X?w.repeat(X.length):""):ct===0?H+(X?w.repeat(X.length):""):w.repeat(k.length):Y==="."?E.repeat(k.length):Y==="*"?I?I+Y+(X?K:""):K:I?R:`\\${R}`);return A===!0&&(r.unescape===!0?U=U.replace(/\\/g,""):U=U.replace(/\\+/g,R=>R.length%2==0?"\\\\":R?"\\":"")),U===t&&r.contains===!0?(p.output=t,p):(p.output=ie.wrapOutput(U,p,e),p)}for(;!Z();){if(c=le(),c==="\0")continue;if(c==="\\"){let R=N();if(R==="/"&&r.bash!==!0||R==="."||R===";")continue;if(!R){c+="\\",b({type:"text",value:c});continue}let I=/^\\+/.exec(ce()),k=0;if(I&&I[0].length>2&&(k=I[0].length,p.index+=k,k%2!=0&&(c+="\\")),r.unescape===!0?c=le():c+=le(),p.brackets===0){b({type:"text",value:c});continue}}if(p.brackets>0&&(c!=="]"||l.value==="["||l.value==="[^")){if(r.posix!==!1&&c===":"){let R=l.value.slice(1);if(R.includes("[")&&(l.posix=!0,R.includes(":"))){let I=l.value.lastIndexOf("["),k=l.value.slice(0,I),Y=l.value.slice(I+2),X=vi[Y];if(X){l.value=k+X,p.backtrack=!0,le(),!i.output&&a.indexOf(l)===1&&(i.output=$);continue}}}(c==="["&&N()!==":"||c==="-"&&N()==="]")&&(c=`\\${c}`),c==="]"&&(l.value==="["||l.value==="[^")&&(c=`\\${c}`),r.posix===!0&&c==="!"&&l.value==="["&&(c="^"),l.value+=c,Qe({value:c});continue}if(p.quotes===1&&c!=='"'){c=ie.escapeRegex(c),l.value+=c,Qe({value:c});continue}if(c==='"'){p.quotes=p.quotes===1?0:1,r.keepQuotes===!0&&b({type:"text",value:c});continue}if(c==="("){Ze("parens"),b({type:"paren",value:c});continue}if(c===")"){if(p.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Le("opening","("));let R=M[M.length-1];if(R&&p.parens===R.parens+1){nn(M.pop());continue}b({type:"paren",value:c,output:p.parens?")":"\\)"}),ve("parens");continue}if(c==="["){if(r.nobracket===!0||!ce().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Le("closing","]"));c=`\\${c}`}else Ze("brackets");b({type:"bracket",value:c});continue}if(c==="]"){if(r.nobracket===!0||l&&l.type==="bracket"&&l.value.length===1){b({type:"text",value:c,output:`\\${c}`});continue}if(p.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Le("opening","["));b({type:"text",value:c,output:`\\${c}`});continue}ve("brackets");let R=l.value.slice(1);if(l.posix!==!0&&R[0]==="^"&&!R.includes("/")&&(c=`/${c}`),l.value+=c,Qe({value:c}),r.literalBrackets===!1||ie.hasRegexChars(R))continue;let I=ie.escapeRegex(l.value);if(p.output=p.output.slice(0,-l.value.length),r.literalBrackets===!0){p.output+=I,l.value=I;continue}l.value=`(${o}${I}|${l.value})`,p.output+=l.value;continue}if(c==="{"&&r.nobrace!==!0){Ze("braces");let R={type:"brace",value:c,output:"(",outputIndex:p.output.length,tokensIndex:p.tokens.length};G.push(R),b(R);continue}if(c==="}"){let R=G[G.length-1];if(r.nobrace===!0||!R){b({type:"text",value:c,output:c});continue}let I=")";if(R.dots===!0){let k=a.slice(),Y=[];for(let X=k.length-1;X>=0&&(a.pop(),k[X].type!=="brace");X--)k[X].type!=="dots"&&Y.unshift(k[X].value);I=xi(Y,r),p.backtrack=!0}if(R.comma!==!0&&R.dots!==!0){let k=p.output.slice(0,R.outputIndex),Y=p.tokens.slice(R.tokensIndex);R.value=R.output="\\{",c=I="\\}",p.output=k;for(let X of Y)p.output+=X.output||X.value}b({type:"brace",value:c,output:I}),ve("braces"),G.pop();continue}if(c==="|"){M.length>0&&M[M.length-1].conditions++,b({type:"text",value:c});continue}if(c===","){let R=c,I=G[G.length-1];I&&me[me.length-1]==="braces"&&(I.comma=!0,R="|"),b({type:"comma",value:c,output:R});continue}if(c==="/"){if(l.type==="dot"&&p.index===p.start+1){p.start=p.index+1,p.consumed="",p.output="",a.pop(),l=i;continue}b({type:"slash",value:c,output:C});continue}if(c==="."){if(p.braces>0&&l.type==="dot"){l.value==="."&&(l.output=E);let R=G[G.length-1];l.type="dots",l.output+=c,l.value+=c,R.dots=!0;continue}if(p.braces+p.parens===0&&l.type!=="bos"&&l.type!=="slash"){b({type:"text",value:c,output:E});continue}b({type:"dot",value:c,output:E});continue}if(c==="?"){if(!(l&&l.value==="(")&&r.noextglob!==!0&&N()==="("&&N(2)!=="?"){Ye("qmark",c);continue}if(l&&l.type==="paren"){let I=N(),k=c;if(I==="<"&&!ie.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(l.value==="("&&!/[!=<:]/.test(I)||I==="<"&&!/<([!=]|\w+>)/.test(ce()))&&(k=`\\${c}`),b({type:"text",value:c,output:k});continue}if(r.dot!==!0&&(l.type==="slash"||l.type==="bos")){b({type:"qmark",value:c,output:re});continue}b({type:"qmark",value:c,output:w});continue}if(c==="!"){if(r.noextglob!==!0&&N()==="("&&(N(2)!=="?"||!/[!=<:]/.test(N(3)))){Ye("negate",c);continue}if(r.nonegate!==!0&&p.index===0){sn();continue}}if(c==="+"){if(r.noextglob!==!0&&N()==="("&&N(2)!=="?"){Ye("plus",c);continue}if(l&&l.value==="("||r.regex===!1){b({type:"plus",value:c,output:f});continue}if(l&&(l.type==="bracket"||l.type==="paren"||l.type==="brace")||p.parens>0){b({type:"plus",value:c});continue}b({type:"plus",value:f});continue}if(c==="@"){if(r.noextglob!==!0&&N()==="("&&N(2)!=="?"){b({type:"at",extglob:!0,value:c,output:""});continue}b({type:"text",value:c});continue}if(c!=="*"){(c==="$"||c==="^")&&(c=`\\${c}`);let R=Ci.exec(ce());R&&(c+=R[0],p.index+=R[0].length),b({type:"text",value:c});continue}if(l&&(l.type==="globstar"||l.star===!0)){l.type="star",l.star=!0,l.value+=c,l.output=K,p.backtrack=!0,p.globstar=!0,se(c);continue}let A=ce();if(r.noextglob!==!0&&/^\([^?]/.test(A)){Ye("star",c);continue}if(l.type==="star"){if(r.noglobstar===!0){se(c);continue}let R=l.prev,I=R.prev,k=R.type==="slash"||R.type==="bos",Y=I&&(I.type==="star"||I.type==="globstar");if(r.bash===!0&&(!k||A[0]&&A[0]!=="/")){b({type:"star",value:c,output:""});continue}let X=p.braces>0&&(R.type==="comma"||R.type==="brace"),ct=M.length&&(R.type==="pipe"||R.type==="paren");if(!k&&R.type!=="paren"&&!X&&!ct){b({type:"star",value:c,output:""});continue}for(;A.slice(0,3)==="/**";){let ze=t[p.index+4];if(ze&&ze!=="/")break;A=A.slice(3),se("/**",3)}if(R.type==="bos"&&Z()){l.type="globstar",l.value+=c,l.output=Q(r),p.output=l.output,p.globstar=!0,se(c);continue}if(R.type==="slash"&&R.prev.type!=="bos"&&!Y&&Z()){p.output=p.output.slice(0,-(R.output+l.output).length),R.output=`(?:${R.output}`,l.type="globstar",l.output=Q(r)+(r.strictSlashes?")":"|$)"),l.value+=c,p.globstar=!0,p.output+=R.output+l.output,se(c);continue}if(R.type==="slash"&&R.prev.type!=="bos"&&A[0]==="/"){let ze=A[1]!==void 0?"|$":"";p.output=p.output.slice(0,-(R.output+l.output).length),R.output=`(?:${R.output}`,l.type="globstar",l.output=`${Q(r)}${C}|${C}${ze})`,l.value+=c,p.output+=R.output+l.output,p.globstar=!0,se(c+le()),b({type:"slash",value:"/",output:""});continue}if(R.type==="bos"&&A[0]==="/"){l.type="globstar",l.value+=c,l.output=`(?:^|${C}|${Q(r)}${C})`,p.output=l.output,p.globstar=!0,se(c+le()),b({type:"slash",value:"/",output:""});continue}p.output=p.output.slice(0,-l.output.length),l.type="globstar",l.output=Q(r),l.value+=c,p.output+=l.output,p.globstar=!0,se(c);continue}let U={type:"star",value:c,output:K};if(r.bash===!0){U.output=".*?",(l.type==="bos"||l.type==="slash")&&(U.output=S+U.output),b(U);continue}if(l&&(l.type==="bracket"||l.type==="paren")&&r.regex===!0){U.output=c,b(U);continue}(p.index===p.start||l.type==="slash"||l.type==="dot")&&(l.type==="dot"?(p.output+=_,l.output+=_):r.dot===!0?(p.output+=O,l.output+=O):(p.output+=S,l.output+=S),N()!=="*"&&(p.output+=$,l.output+=$)),b(U)}for(;p.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing","]"));p.output=ie.escapeLast(p.output,"["),ve("brackets")}for(;p.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing",")"));p.output=ie.escapeLast(p.output,"("),ve("parens")}for(;p.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing","}"));p.output=ie.escapeLast(p.output,"{"),ve("braces")}if(r.strictSlashes!==!0&&(l.type==="star"||l.type==="bracket")&&b({type:"maybe_slash",value:"",output:`${C}?`}),p.backtrack===!0){p.output="";for(let A of p.tokens)p.output+=A.output!=null?A.output:A.value,A.suffix&&(p.output+=A.suffix)}return p};Ct.fastpaths=(t,e)=>{let r=P({},e),s=typeof r.maxLength=="number"?Math.min(nt,r.maxLength):nt,n=t.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);t=Gr[t]||t;let i=ie.isWindows(e),{DOT_LITERAL:a,SLASH_LITERAL:o,ONE_CHAR:u,DOTS_SLASH:g,NO_DOT:h,NO_DOTS:E,NO_DOTS_SLASH:f,STAR:C,START_ANCHOR:$}=st.globChars(i),d=r.dot?E:h,v=r.dot?f:h,_=r.capture?"":"?:",O={negated:!1,prefix:""},w=r.bash===!0?".*?":C;r.capture&&(w=`(${w})`);let re=S=>S.noglobstar===!0?w:`(${_}(?:(?!${$}${S.dot?g:a}).)*?)`,V=S=>{switch(S){case"*":return`${d}${u}${w}`;case".*":return`${a}${u}${w}`;case"*.*":return`${d}${w}${a}${u}${w}`;case"*/*":return`${d}${w}${o}${u}${v}${w}`;case"**":return d+re(r);case"**/*":return`(?:${d}${re(r)}${o})?${v}${u}${w}`;case"**/*.*":return`(?:${d}${re(r)}${o})?${v}${w}${a}${u}${w}`;case"**/.*":return`(?:${d}${re(r)}${o})?${a}${u}${w}`;default:{let H=/^(.*?)\.(\w+)$/.exec(S);if(!H)return;let K=V(H[1]);return K?K+a+H[2]:void 0}}},ye=ie.removePrefix(t,O),Q=V(ye);return Q&&r.strictSlashes!==!0&&(Q+=`${o}?`),Q};Ur.exports=Ct});var kr=T((ro,qr)=>{"use strict";var _i=Ee("path"),Ti=Dr(),St=Mr(),xt=qe(),Ii=Me(),bi=t=>t&&typeof t=="object"&&!Array.isArray(t),F=(t,e,r=!1)=>{if(Array.isArray(t)){let h=t.map(f=>F(f,e,r));return f=>{for(let C of h){let $=C(f);if($)return $}return!1}}let s=bi(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");let n=e||{},i=xt.isWindows(e),a=s?F.compileRe(t,e):F.makeRe(t,e,!1,!0),o=a.state;delete a.state;let u=()=>!1;if(n.ignore){let h=j(P({},e),{ignore:null,onMatch:null,onResult:null});u=F(n.ignore,h,r)}let g=(h,E=!1)=>{let{isMatch:f,match:C,output:$}=F.test(h,a,e,{glob:t,posix:i}),d={glob:t,state:o,regex:a,posix:i,input:h,output:$,match:C,isMatch:f};return typeof n.onResult=="function"&&n.onResult(d),f===!1?(d.isMatch=!1,E?d:!1):u(h)?(typeof n.onIgnore=="function"&&n.onIgnore(d),d.isMatch=!1,E?d:!1):(typeof n.onMatch=="function"&&n.onMatch(d),E?d:!0)};return r&&(g.state=o),g};F.test=(t,e,r,{glob:s,posix:n}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let i=r||{},a=i.format||(n?xt.toPosixSlashes:null),o=t===s,u=o&&a?a(t):t;return o===!1&&(u=a?a(t):t,o=u===s),(o===!1||i.capture===!0)&&(i.matchBase===!0||i.basename===!0?o=F.matchBase(t,e,r,n):o=e.exec(u)),{isMatch:Boolean(o),match:o,output:u}};F.matchBase=(t,e,r,s=xt.isWindows(r))=>(e instanceof RegExp?e:F.makeRe(e,r)).test(_i.basename(t));F.isMatch=(t,e,r)=>F(e,r)(t);F.parse=(t,e)=>Array.isArray(t)?t.map(r=>F.parse(r,e)):St(t,j(P({},e),{fastpaths:!1}));F.scan=(t,e)=>Ti(t,e);F.compileRe=(t,e,r=!1,s=!1)=>{if(r===!0)return t.output;let n=e||{},i=n.contains?"":"^",a=n.contains?"":"$",o=`${i}(?:${t.output})${a}`;t&&t.negated===!0&&(o=`^(?!${o}).*$`);let u=F.toRegex(o,e);return s===!0&&(u.state=t),u};F.makeRe=(t,e={},r=!1,s=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(n.output=St.fastpaths(t,e)),n.output||(n=St(t,e)),F.compileRe(n,e,r,s)};F.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};F.constants=Ii;qr.exports=F});var Fr=T((so,Br)=>{"use strict";Br.exports=kr()});var Vr=T((no,Kr)=>{"use strict";var Xr=Ee("util"),jr=Cr(),pe=Fr(),_t=qe(),Wr=t=>t===""||t==="./",q=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let s=new Set,n=new Set,i=new Set,a=0,o=h=>{i.add(h.output),r&&r.onResult&&r.onResult(h)};for(let h=0;h<e.length;h++){let E=pe(String(e[h]),j(P({},r),{onResult:o}),!0),f=E.state.negated||E.state.negatedExtglob;f&&a++;for(let C of t){let $=E(C,!0);!(f?!$.isMatch:$.isMatch)||(f?s.add($.output):(s.delete($.output),n.add($.output)))}}let g=(a===e.length?[...i]:[...n]).filter(h=>!s.has(h));if(r&&g.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(h=>h.replace(/\\/g,"")):e}return g};q.match=q;q.matcher=(t,e)=>pe(t,e);q.isMatch=(t,e,r)=>pe(e,r)(t);q.any=q.isMatch;q.not=(t,e,r={})=>{e=[].concat(e).map(String);let s=new Set,n=[],i=o=>{r.onResult&&r.onResult(o),n.push(o.output)},a=new Set(q(t,e,j(P({},r),{onResult:i})));for(let o of n)a.has(o)||s.add(o);return[...s]};q.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Xr.inspect(t)}"`);if(Array.isArray(e))return e.some(s=>q.contains(t,s,r));if(typeof e=="string"){if(Wr(t)||Wr(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return q.isMatch(t,e,j(P({},r),{contains:!0}))};q.matchKeys=(t,e,r)=>{if(!_t.isObject(t))throw new TypeError("Expected the first argument to be an object");let s=q(Object.keys(t),e,r),n={};for(let i of s)n[i]=t[i];return n};q.some=(t,e,r)=>{let s=[].concat(t);for(let n of[].concat(e)){let i=pe(String(n),r);if(s.some(a=>i(a)))return!0}return!1};q.every=(t,e,r)=>{let s=[].concat(t);for(let n of[].concat(e)){let i=pe(String(n),r);if(!s.every(a=>i(a)))return!1}return!0};q.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Xr.inspect(t)}"`);return[].concat(e).every(s=>pe(s,r)(t))};q.capture=(t,e,r)=>{let s=_t.isWindows(r),i=pe.makeRe(String(t),j(P({},r),{capture:!0})).exec(s?_t.toPosixSlashes(e):e);if(i)return i.slice(1).map(a=>a===void 0?"":a)};q.makeRe=(...t)=>pe.makeRe(...t);q.scan=(...t)=>pe.scan(...t);q.parse=(t,e)=>{let r=[];for(let s of[].concat(t||[]))for(let n of jr(String(s),e))r.push(pe.parse(n,e));return r};q.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!/\{.*\}/.test(t)?[t]:jr(t,e)};q.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return q.braces(t,j(P({},e),{expand:!0}))};Kr.exports=q});var it=T((io,Qr)=>{var Ni="2.0.0",Li=256,Oi=Number.MAX_SAFE_INTEGER||9007199254740991,wi=16;Qr.exports={SEMVER_SPEC_VERSION:Ni,MAX_LENGTH:Li,MAX_SAFE_INTEGER:Oi,MAX_SAFE_COMPONENT_LENGTH:wi}});var Be=T((ao,Zr)=>{var Hi=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Zr.exports=Hi});var Fe=T(($e,Yr)=>{var{MAX_SAFE_COMPONENT_LENGTH:Tt}=it(),Pi=Be();$e=Yr.exports={};var Di=$e.re=[],y=$e.src=[],m=$e.t={},Gi=0,x=(t,e,r)=>{let s=Gi++;Pi(t,s,e),m[t]=s,y[s]=e,Di[s]=new RegExp(e,r?"g":void 0)};x("NUMERICIDENTIFIER","0|[1-9]\\d*");x("NUMERICIDENTIFIERLOOSE","[0-9]+");x("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");x("MAINVERSION",`(${y[m.NUMERICIDENTIFIER]})\\.(${y[m.NUMERICIDENTIFIER]})\\.(${y[m.NUMERICIDENTIFIER]})`);x("MAINVERSIONLOOSE",`(${y[m.NUMERICIDENTIFIERLOOSE]})\\.(${y[m.NUMERICIDENTIFIERLOOSE]})\\.(${y[m.NUMERICIDENTIFIERLOOSE]})`);x("PRERELEASEIDENTIFIER",`(?:${y[m.NUMERICIDENTIFIER]}|${y[m.NONNUMERICIDENTIFIER]})`);x("PRERELEASEIDENTIFIERLOOSE",`(?:${y[m.NUMERICIDENTIFIERLOOSE]}|${y[m.NONNUMERICIDENTIFIER]})`);x("PRERELEASE",`(?:-(${y[m.PRERELEASEIDENTIFIER]}(?:\\.${y[m.PRERELEASEIDENTIFIER]})*))`);x("PRERELEASELOOSE",`(?:-?(${y[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${y[m.PRERELEASEIDENTIFIERLOOSE]})*))`);x("BUILDIDENTIFIER","[0-9A-Za-z-]+");x("BUILD",`(?:\\+(${y[m.BUILDIDENTIFIER]}(?:\\.${y[m.BUILDIDENTIFIER]})*))`);x("FULLPLAIN",`v?${y[m.MAINVERSION]}${y[m.PRERELEASE]}?${y[m.BUILD]}?`);x("FULL",`^${y[m.FULLPLAIN]}$`);x("LOOSEPLAIN",`[v=\\s]*${y[m.MAINVERSIONLOOSE]}${y[m.PRERELEASELOOSE]}?${y[m.BUILD]}?`);x("LOOSE",`^${y[m.LOOSEPLAIN]}$`);x("GTLT","((?:<|>)?=?)");x("XRANGEIDENTIFIERLOOSE",`${y[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);x("XRANGEIDENTIFIER",`${y[m.NUMERICIDENTIFIER]}|x|X|\\*`);x("XRANGEPLAIN",`[v=\\s]*(${y[m.XRANGEIDENTIFIER]})(?:\\.(${y[m.XRANGEIDENTIFIER]})(?:\\.(${y[m.XRANGEIDENTIFIER]})(?:${y[m.PRERELEASE]})?${y[m.BUILD]}?)?)?`);x("XRANGEPLAINLOOSE",`[v=\\s]*(${y[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${y[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${y[m.XRANGEIDENTIFIERLOOSE]})(?:${y[m.PRERELEASELOOSE]})?${y[m.BUILD]}?)?)?`);x("XRANGE",`^${y[m.GTLT]}\\s*${y[m.XRANGEPLAIN]}$`);x("XRANGELOOSE",`^${y[m.GTLT]}\\s*${y[m.XRANGEPLAINLOOSE]}$`);x("COERCE",`(^|[^\\d])(\\d{1,${Tt}})(?:\\.(\\d{1,${Tt}}))?(?:\\.(\\d{1,${Tt}}))?(?:$|[^\\d])`);x("COERCERTL",y[m.COERCE],!0);x("LONETILDE","(?:~>?)");x("TILDETRIM",`(\\s*)${y[m.LONETILDE]}\\s+`,!0);$e.tildeTrimReplace="$1~";x("TILDE",`^${y[m.LONETILDE]}${y[m.XRANGEPLAIN]}$`);x("TILDELOOSE",`^${y[m.LONETILDE]}${y[m.XRANGEPLAINLOOSE]}$`);x("LONECARET","(?:\\^)");x("CARETTRIM",`(\\s*)${y[m.LONECARET]}\\s+`,!0);$e.caretTrimReplace="$1^";x("CARET",`^${y[m.LONECARET]}${y[m.XRANGEPLAIN]}$`);x("CARETLOOSE",`^${y[m.LONECARET]}${y[m.XRANGEPLAINLOOSE]}$`);x("COMPARATORLOOSE",`^${y[m.GTLT]}\\s*(${y[m.LOOSEPLAIN]})$|^$`);x("COMPARATOR",`^${y[m.GTLT]}\\s*(${y[m.FULLPLAIN]})$|^$`);x("COMPARATORTRIM",`(\\s*)${y[m.GTLT]}\\s*(${y[m.LOOSEPLAIN]}|${y[m.XRANGEPLAIN]})`,!0);$e.comparatorTrimReplace="$1$2$3";x("HYPHENRANGE",`^\\s*(${y[m.XRANGEPLAIN]})\\s+-\\s+(${y[m.XRANGEPLAIN]})\\s*$`);x("HYPHENRANGELOOSE",`^\\s*(${y[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${y[m.XRANGEPLAINLOOSE]})\\s*$`);x("STAR","(<|>)?=?\\s*\\*");x("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");x("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Xe=T((oo,zr)=>{var Ui=["includePrerelease","loose","rtl"],Mi=t=>t?typeof t!="object"?{loose:!0}:Ui.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};zr.exports=Mi});var rs=T((uo,ts)=>{var Jr=/^[0-9]+$/,es=(t,e)=>{let r=Jr.test(t),s=Jr.test(e);return r&&s&&(t=+t,e=+e),t===e?0:r&&!s?-1:s&&!r?1:t<e?-1:1},qi=(t,e)=>es(e,t);ts.exports={compareIdentifiers:es,rcompareIdentifiers:qi}});var we=T((lo,as)=>{var at=Be(),{MAX_LENGTH:ss,MAX_SAFE_INTEGER:ot}=it(),{re:ns,t:is}=Fe(),ki=Xe(),{compareIdentifiers:Oe}=rs(),oe=class{constructor(e,r){if(r=ki(r),e instanceof oe){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>ss)throw new TypeError(`version is longer than ${ss} characters`);at("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let s=e.trim().match(r.loose?ns[is.LOOSE]:ns[is.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>ot||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ot||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ot||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let i=+n;if(i>=0&&i<ot)return i}return n}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(at("SemVer.compare",this.version,this.options,e),!(e instanceof oe)){if(typeof e=="string"&&e===this.version)return 0;e=new oe(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof oe||(e=new oe(e,this.options)),Oe(this.major,e.major)||Oe(this.minor,e.minor)||Oe(this.patch,e.patch)}comparePre(e){if(e instanceof oe||(e=new oe(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let s=this.prerelease[r],n=e.prerelease[r];if(at("prerelease compare",r,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return Oe(s,n)}while(++r)}compareBuild(e){e instanceof oe||(e=new oe(e,this.options));let r=0;do{let s=this.build[r],n=e.build[r];if(at("prerelease compare",r,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return Oe(s,n)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);s===-1&&this.prerelease.push(0)}r&&(Oe(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};as.exports=oe});var fs=T((co,cs)=>{var{MAX_LENGTH:Bi}=it(),{re:os,t:us}=Fe(),ls=we(),Fi=Xe(),Xi=(t,e)=>{if(e=Fi(e),t instanceof ls)return t;if(typeof t!="string"||t.length>Bi||!(e.loose?os[us.LOOSE]:os[us.FULL]).test(t))return null;try{return new ls(t,e)}catch(s){return null}};cs.exports=Xi});var _e=T((fo,hs)=>{var ps=we(),ji=(t,e,r)=>new ps(t,r).compare(new ps(e,r));hs.exports=ji});var It=T((po,gs)=>{var Wi=_e(),Ki=(t,e,r)=>Wi(t,e,r)===0;gs.exports=Ki});var As=T((ho,Rs)=>{var Es=fs(),Vi=It(),Qi=(t,e)=>{if(Vi(t,e))return null;{let r=Es(t),s=Es(e),n=r.prerelease.length||s.prerelease.length,i=n?"pre":"",a=n?"prerelease":"";for(let o in r)if((o==="major"||o==="minor"||o==="patch")&&r[o]!==s[o])return i+o;return a}};Rs.exports=Qi});var ys=T((go,ds)=>{"use strict";ds.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var $s=T((Eo,ms)=>{"use strict";ms.exports=L;L.Node=Te;L.create=L;function L(t){var e=this;if(e instanceof L||(e=new L),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)e.push(arguments[r]);return e}L.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};L.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};L.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};L.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Yi(this,arguments[t]);return this.length};L.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)zi(this,arguments[t]);return this.length};L.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};L.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};L.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,s=0;r!==null;s++)t.call(e,r.value,s,this),r=r.next};L.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,s=this.length-1;r!==null;s--)t.call(e,r.value,s,this),r=r.prev};L.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};L.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};L.prototype.map=function(t,e){e=e||this;for(var r=new L,s=this.head;s!==null;)r.push(t.call(e,s.value,this)),s=s.next;return r};L.prototype.mapReverse=function(t,e){e=e||this;for(var r=new L,s=this.tail;s!==null;)r.push(t.call(e,s.value,this)),s=s.prev;return r};L.prototype.reduce=function(t,e){var r,s=this.head;if(arguments.length>1)r=e;else if(this.head)s=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;s!==null;n++)r=t(r,s.value,n),s=s.next;return r};L.prototype.reduceReverse=function(t,e){var r,s=this.tail;if(arguments.length>1)r=e;else if(this.tail)s=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;s!==null;n--)r=t(r,s.value,n),s=s.prev;return r};L.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};L.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};L.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new L;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=0,n=this.head;n!==null&&s<t;s++)n=n.next;for(;n!==null&&s<e;s++,n=n.next)r.push(n.value);return r};L.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new L;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=this.length,n=this.tail;n!==null&&s>e;s--)n=n.prev;for(;n!==null&&s>t;s--,n=n.prev)r.push(n.value);return r};L.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var s=0,n=this.head;n!==null&&s<t;s++)n=n.next;for(var i=[],s=0;n&&s<e;s++)i.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var s=0;s<r.length;s++)n=Zi(this,n,r[s]);return i};L.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var s=r.prev;r.prev=r.next,r.next=s}return this.head=e,this.tail=t,this};function Zi(t,e,r){var s=e===t.head?new Te(r,null,e,t):new Te(r,e,e.next,t);return s.next===null&&(t.tail=s),s.prev===null&&(t.head=s),t.length++,s}function Yi(t,e){t.tail=new Te(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function zi(t,e){t.head=new Te(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Te(t,e,r,s){if(!(this instanceof Te))return new Te(t,e,r,s);this.list=s,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{ys()(L)}catch(t){}});var Is=T((Ro,Ts)=>{"use strict";var Ji=$s(),Ie=Symbol("max"),Ae=Symbol("length"),He=Symbol("lengthCalculator"),je=Symbol("allowStale"),be=Symbol("maxAge"),de=Symbol("dispose"),vs=Symbol("noDisposeOnSet"),W=Symbol("lruList"),ue=Symbol("cache"),Cs=Symbol("updateAgeOnGet"),bt=()=>1,Ss=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Ie]=e.max||Infinity,s=e.length||bt;if(this[He]=typeof s!="function"?bt:s,this[je]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[be]=e.maxAge||0,this[de]=e.dispose,this[vs]=e.noDisposeOnSet||!1,this[Cs]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Ie]=e||Infinity,We(this)}get max(){return this[Ie]}set allowStale(e){this[je]=!!e}get allowStale(){return this[je]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[be]=e,We(this)}get maxAge(){return this[be]}set lengthCalculator(e){typeof e!="function"&&(e=bt),e!==this[He]&&(this[He]=e,this[Ae]=0,this[W].forEach(r=>{r.length=this[He](r.value,r.key),this[Ae]+=r.length})),We(this)}get lengthCalculator(){return this[He]}get length(){return this[Ae]}get itemCount(){return this[W].length}rforEach(e,r){r=r||this;for(let s=this[W].tail;s!==null;){let n=s.prev;_s(this,e,s,r),s=n}}forEach(e,r){r=r||this;for(let s=this[W].head;s!==null;){let n=s.next;_s(this,e,s,r),s=n}}keys(){return this[W].toArray().map(e=>e.key)}values(){return this[W].toArray().map(e=>e.value)}reset(){this[de]&&this[W]&&this[W].length&&this[W].forEach(e=>this[de](e.key,e.value)),this[ue]=new Map,this[W]=new Ji,this[Ae]=0}dump(){return this[W].map(e=>ut(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[W]}set(e,r,s){if(s=s||this[be],s&&typeof s!="number")throw new TypeError("maxAge must be a number");let n=s?Date.now():0,i=this[He](r,e);if(this[ue].has(e)){if(i>this[Ie])return Pe(this,this[ue].get(e)),!1;let u=this[ue].get(e).value;return this[de]&&(this[vs]||this[de](e,u.value)),u.now=n,u.maxAge=s,u.value=r,this[Ae]+=i-u.length,u.length=i,this.get(e),We(this),!0}let a=new xs(e,r,i,n,s);return a.length>this[Ie]?(this[de]&&this[de](e,r),!1):(this[Ae]+=a.length,this[W].unshift(a),this[ue].set(e,this[W].head),We(this),!0)}has(e){if(!this[ue].has(e))return!1;let r=this[ue].get(e).value;return!ut(this,r)}get(e){return Nt(this,e,!0)}peek(e){return Nt(this,e,!1)}pop(){let e=this[W].tail;return e?(Pe(this,e),e.value):null}del(e){Pe(this,this[ue].get(e))}load(e){this.reset();let r=Date.now();for(let s=e.length-1;s>=0;s--){let n=e[s],i=n.e||0;if(i===0)this.set(n.k,n.v);else{let a=i-r;a>0&&this.set(n.k,n.v,a)}}}prune(){this[ue].forEach((e,r)=>Nt(this,r,!1))}},Nt=(t,e,r)=>{let s=t[ue].get(e);if(s){let n=s.value;if(ut(t,n)){if(Pe(t,s),!t[je])return}else r&&(t[Cs]&&(s.value.now=Date.now()),t[W].unshiftNode(s));return n.value}},ut=(t,e)=>{if(!e||!e.maxAge&&!t[be])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[be]&&r>t[be]},We=t=>{if(t[Ae]>t[Ie])for(let e=t[W].tail;t[Ae]>t[Ie]&&e!==null;){let r=e.prev;Pe(t,e),e=r}},Pe=(t,e)=>{if(e){let r=e.value;t[de]&&t[de](r.key,r.value),t[Ae]-=r.length,t[ue].delete(r.key),t[W].removeNode(e)}},xs=class{constructor(e,r,s,n,i){this.key=e,this.value=r,this.length=s,this.now=n,this.maxAge=i||0}},_s=(t,e,r,s)=>{let n=r.value;ut(t,n)&&(Pe(t,r),t[je]||(n=void 0)),n&&e.call(s,n.value,n.key,t)};Ts.exports=Ss});var Ns=T((Ao,bs)=>{var ea=_e(),ta=(t,e,r)=>ea(t,e,r)!==0;bs.exports=ta});var Lt=T((yo,Ls)=>{var ra=_e(),sa=(t,e,r)=>ra(t,e,r)>0;Ls.exports=sa});var ws=T((mo,Os)=>{var na=_e(),ia=(t,e,r)=>na(t,e,r)>=0;Os.exports=ia});var Ps=T(($o,Hs)=>{var aa=_e(),oa=(t,e,r)=>aa(t,e,r)<0;Hs.exports=oa});var Gs=T((vo,Ds)=>{var ua=_e(),la=(t,e,r)=>ua(t,e,r)<=0;Ds.exports=la});var Ms=T((Co,Us)=>{var ca=It(),fa=Ns(),pa=Lt(),ha=ws(),ga=Ps(),Ea=Gs(),Ra=(t,e,r,s)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return ca(t,r,s);case"!=":return fa(t,r,s);case">":return pa(t,r,s);case">=":return ha(t,r,s);case"<":return ga(t,r,s);case"<=":return Ea(t,r,s);default:throw new TypeError(`Invalid operator: ${e}`)}};Us.exports=Ra});var js=T((So,Xs)=>{var Ke=Symbol("SemVer ANY"),Ve=class{static get ANY(){return Ke}constructor(e,r){if(r=Aa(r),e instanceof Ve){if(e.loose===!!r.loose)return e;e=e.value}wt("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Ke?this.value="":this.value=this.operator+this.semver.version,wt("comp",this)}parse(e){let r=this.options.loose?qs[ks.COMPARATORLOOSE]:qs[ks.COMPARATOR],s=e.match(r);if(!s)throw new TypeError(`Invalid comparator: ${e}`);this.operator=s[1]!==void 0?s[1]:"",this.operator==="="&&(this.operator=""),s[2]?this.semver=new Bs(s[2],this.options.loose):this.semver=Ke}toString(){return this.value}test(e){if(wt("Comparator.test",e,this.options.loose),this.semver===Ke||e===Ke)return!0;if(typeof e=="string")try{e=new Bs(e,this.options)}catch(r){return!1}return Ot(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Ve))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Fs(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new Fs(this.value,r).test(e.semver);let s=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),n=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),i=this.semver.version===e.semver.version,a=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),o=Ot(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=Ot(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return s||n||i&&a||o||u}};Xs.exports=Ve;var Aa=Xe(),{re:qs,t:ks}=Fe(),Ot=Ms(),wt=Be(),Bs=we(),Fs=Ht()});var Ht=T((xo,Qs)=>{var De=class{constructor(e,r){if(r=ya(r),e instanceof De)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new De(e.raw,r);if(e instanceof Pt)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split("||").map(s=>this.parseRange(s.trim())).filter(s=>s.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let s=this.set[0];if(this.set=this.set.filter(n=>!Ks(n[0])),this.set.length===0)this.set=[s];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&Sa(n[0])){this.set=[n];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let s=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=Ws.get(s);if(n)return n;let i=this.options.loose,a=i?te[z.HYPHENRANGELOOSE]:te[z.HYPHENRANGE];e=e.replace(a,Ha(this.options.includePrerelease)),B("hyphen replace",e),e=e.replace(te[z.COMPARATORTRIM],$a),B("comparator trim",e),e=e.replace(te[z.TILDETRIM],va),e=e.replace(te[z.CARETTRIM],Ca),e=e.split(/\s+/).join(" ");let o=e.split(" ").map(E=>xa(E,this.options)).join(" ").split(/\s+/).map(E=>wa(E,this.options));i&&(o=o.filter(E=>(B("loose invalid filter",E,this.options),!!E.match(te[z.COMPARATORLOOSE])))),B("range list",o);let u=new Map,g=o.map(E=>new Pt(E,this.options));for(let E of g){if(Ks(E))return[E];u.set(E.value,E)}u.size>1&&u.has("")&&u.delete("");let h=[...u.values()];return Ws.set(s,h),h}intersects(e,r){if(!(e instanceof De))throw new TypeError("a Range is required");return this.set.some(s=>Vs(s,r)&&e.set.some(n=>Vs(n,r)&&s.every(i=>n.every(a=>i.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ma(e,this.options)}catch(r){return!1}for(let r=0;r<this.set.length;r++)if(Pa(this.set[r],e,this.options))return!0;return!1}};Qs.exports=De;var da=Is(),Ws=new da({max:1e3}),ya=Xe(),Pt=js(),B=Be(),ma=we(),{re:te,t:z,comparatorTrimReplace:$a,tildeTrimReplace:va,caretTrimReplace:Ca}=Fe(),Ks=t=>t.value==="<0.0.0-0",Sa=t=>t.value==="",Vs=(t,e)=>{let r=!0,s=t.slice(),n=s.pop();for(;r&&s.length;)r=s.every(i=>n.intersects(i,e)),n=s.pop();return r},xa=(t,e)=>(B("comp",t,e),t=Ia(t,e),B("caret",t),t=_a(t,e),B("tildes",t),t=Na(t,e),B("xrange",t),t=Oa(t,e),B("stars",t),t),J=t=>!t||t.toLowerCase()==="x"||t==="*",_a=(t,e)=>t.trim().split(/\s+/).map(r=>Ta(r,e)).join(" "),Ta=(t,e)=>{let r=e.loose?te[z.TILDELOOSE]:te[z.TILDE];return t.replace(r,(s,n,i,a,o)=>{B("tilde",t,s,n,i,a,o);let u;return J(n)?u="":J(i)?u=`>=${n}.0.0 <${+n+1}.0.0-0`:J(a)?u=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:o?(B("replaceTilde pr",o),u=`>=${n}.${i}.${a}-${o} <${n}.${+i+1}.0-0`):u=`>=${n}.${i}.${a} <${n}.${+i+1}.0-0`,B("tilde return",u),u})},Ia=(t,e)=>t.trim().split(/\s+/).map(r=>ba(r,e)).join(" "),ba=(t,e)=>{B("caret",t,e);let r=e.loose?te[z.CARETLOOSE]:te[z.CARET],s=e.includePrerelease?"-0":"";return t.replace(r,(n,i,a,o,u)=>{B("caret",t,n,i,a,o,u);let g;return J(i)?g="":J(a)?g=`>=${i}.0.0${s} <${+i+1}.0.0-0`:J(o)?i==="0"?g=`>=${i}.${a}.0${s} <${i}.${+a+1}.0-0`:g=`>=${i}.${a}.0${s} <${+i+1}.0.0-0`:u?(B("replaceCaret pr",u),i==="0"?a==="0"?g=`>=${i}.${a}.${o}-${u} <${i}.${a}.${+o+1}-0`:g=`>=${i}.${a}.${o}-${u} <${i}.${+a+1}.0-0`:g=`>=${i}.${a}.${o}-${u} <${+i+1}.0.0-0`):(B("no pr"),i==="0"?a==="0"?g=`>=${i}.${a}.${o}${s} <${i}.${a}.${+o+1}-0`:g=`>=${i}.${a}.${o}${s} <${i}.${+a+1}.0-0`:g=`>=${i}.${a}.${o} <${+i+1}.0.0-0`),B("caret return",g),g})},Na=(t,e)=>(B("replaceXRanges",t,e),t.split(/\s+/).map(r=>La(r,e)).join(" ")),La=(t,e)=>{t=t.trim();let r=e.loose?te[z.XRANGELOOSE]:te[z.XRANGE];return t.replace(r,(s,n,i,a,o,u)=>{B("xRange",t,s,n,i,a,o,u);let g=J(i),h=g||J(a),E=h||J(o),f=E;return n==="="&&f&&(n=""),u=e.includePrerelease?"-0":"",g?n===">"||n==="<"?s="<0.0.0-0":s="*":n&&f?(h&&(a=0),o=0,n===">"?(n=">=",h?(i=+i+1,a=0,o=0):(a=+a+1,o=0)):n==="<="&&(n="<",h?i=+i+1:a=+a+1),n==="<"&&(u="-0"),s=`${n+i}.${a}.${o}${u}`):h?s=`>=${i}.0.0${u} <${+i+1}.0.0-0`:E&&(s=`>=${i}.${a}.0${u} <${i}.${+a+1}.0-0`),B("xRange return",s),s})},Oa=(t,e)=>(B("replaceStars",t,e),t.trim().replace(te[z.STAR],"")),wa=(t,e)=>(B("replaceGTE0",t,e),t.trim().replace(te[e.includePrerelease?z.GTE0PRE:z.GTE0],"")),Ha=t=>(e,r,s,n,i,a,o,u,g,h,E,f,C)=>(J(s)?r="":J(n)?r=`>=${s}.0.0${t?"-0":""}`:J(i)?r=`>=${s}.${n}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,J(g)?u="":J(h)?u=`<${+g+1}.0.0-0`:J(E)?u=`<${g}.${+h+1}.0-0`:f?u=`<=${g}.${h}.${E}-${f}`:t?u=`<${g}.${h}.${+E+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),Pa=(t,e,r)=>{for(let s=0;s<t.length;s++)if(!t[s].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let s=0;s<t.length;s++)if(B(t[s].semver),t[s].semver!==Pt.ANY&&t[s].semver.prerelease.length>0){let n=t[s].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}});var zs=T((_o,Ys)=>{var Dt=we(),Da=Ht(),Zs=Lt(),Ga=(t,e)=>{t=new Da(t,e);let r=new Dt("0.0.0");if(t.test(r)||(r=new Dt("0.0.0-0"),t.test(r)))return r;r=null;for(let s=0;s<t.set.length;++s){let n=t.set[s],i=null;n.forEach(a=>{let o=new Dt(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!i||Zs(o,i))&&(i=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),i&&(!r||Zs(r,i))&&(r=i)}return r&&t.test(r)?r:null};Ys.exports=Ga});var qa={};gn(qa,{default:()=>Ma});var D=Ce(Ee("@yarnpkg/core")),he=Ce(Ee("@yarnpkg/fslib")),Js=Ce(Ee("@yarnpkg/plugin-essentials")),ge=Ce(Ee("clipanion")),Gt=Ce(Vr()),en=Ce(As()),tn=Ce(zs()),rn={maxPackageUpdates:!1,preserveSemVerRange:!0},lt=class extends ge.Command{constructor(){super(...arguments);this.configFilename=ge.Option.String("--config","semver-up.json");this.changesetFilename=ge.Option.String("--changeset",{required:!1});this.dryRun=ge.Option.Boolean("--dry-run",!1);this.preserveSemVerRange=ge.Option.Boolean("--preserve-semver",!0);this.include=ge.Option.String("--include",{required:!1});this.ruleGlobs=ge.Option.Rest()}async execute(){try{let e=await D.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await D.Project.find(e,this.context.cwd),n=await D.Cache.find(e);await r.restoreInstallState();let i=await this.parseConfigFile(),a=async g=>{if(!s&&!this.include)throw new Error("Must be run from within a workspace.");let h=r.workspaces.filter(C=>C.manifest.name).map(C=>D.structUtils.stringifyIdent(C.manifest.name)),E=this.include?new Set((0,Gt.default)(h,this.include).map(C=>r.tryWorkspaceByIdent(D.structUtils.parseIdent(C))).filter(C=>C)):new Set([s]);if(!E.size)throw new Error("No workspaces selected.");let f=[];for(let C of E){let $=D.structUtils.stringifyIdent(C.manifest.name),d=await g.startTimerPromise(`[${$}] Processing Semver Up Rules`,{skipIfEmpty:!1},async()=>this.getRulesWithPackages({config:i,workspace:C,report:g})),v=await g.startTimerPromise(`[${$}] Finding Updates`,{skipIfEmpty:!1},async()=>this.findUpdateCandidates({workspace:C,rulesWithPackages:d,cache:n,configuration:e,report:g})),_=await g.startTimerPromise(`[${$}] Staging Updates`,{skipIfEmpty:!1},async()=>this.applyUpdates({config:i,workspace:C,rulesWithUpdates:v,report:g}));f.push(_)}E.size>1&&this.changesetFilename?g.reportError(D.MessageName.UNNAMED,"Changesets not supported when targetting more than one workspace."):await g.startTimerPromise("Writing Changeset File",{skipIfEmpty:!0},async()=>{await this.writeChangeset({changeset:f[0]})}),this.dryRun||await r.install({cache:n,report:g})};if(this.changesetFilename==="-"){try{await a(new D.ThrowReport)}catch(g){return 1}return 0}return(await D.StreamReport.start({configuration:e,stdout:this.context.stdout},a)).exitCode()}catch(e){return this.context.stderr.write(`${String(e)}
`),1}}async parseConfigFile(){var i,a,o;let e=he.ppath.resolve(he.ppath.cwd(),he.npath.toPortablePath(this.configFilename)),r={};try{r=D.miscUtils.dynamicRequire(e)}catch(u){r={rules:[["*",{}]]}}let n={rules:((i=r==null?void 0:r.rules)!=null?i:[]).map(([u,g])=>[u,P(j(P({},rn),{preserveSemVerRange:this.preserveSemVerRange}),g)]),maxRulesApplied:(a=r==null?void 0:r.maxRulesApplied)!=null?a:1,skipManifestOnlyChanges:(o=r==null?void 0:r.skipManifestOnlyChanges)!=null?o:!1};if(this.ruleGlobs.length){n.rules=[],n.maxRulesApplied=!1;for(let u of this.ruleGlobs)n.rules.push([u,j(P({},rn),{preserveSemVerRange:this.preserveSemVerRange})])}return n}async getRulesWithPackages({config:e,workspace:r,report:s}){let n=r.manifest,i=e.rules.map(([g,h])=>[g,{rule:h,packages:new Set}]),a=[...n.dependencies.entries(),...n.devDependencies.entries()],o=D.StreamReport.progressViaCounter(a.length),u=s.reportProgress(o);for(let[g,h]of a){let E=i.find(([f])=>(0,Gt.default)([D.structUtils.stringifyIdent(h)],f).length>0);E&&E[1].packages.add(g),o.tick()}return await u,i}async findUpdateCandidates({workspace:e,rulesWithPackages:r,cache:s,configuration:n,report:i}){let a=new Map([...e.manifest.dependencies.entries(),...e.manifest.devDependencies.entries()]),o=new Map;for(let[u,{rule:g,packages:h}]of r){let E=new Map,f=D.StreamReport.progressViaCounter(h.size),C=i.reportProgress(f);for(let $ of h){let d=a.get($);if(!d){f.tick();continue}let v=D.structUtils.parseRange(d.range);if(!(v.protocol===null&&n.get("defaultProtocol")==="npm:"||v.protocol==="npm:")){f.tick();continue}let O=D.structUtils.convertToIdent(d),w=await Js.suggestUtils.fetchDescriptorFrom(O,g.preserveSemVerRange?d==null?void 0:d.range:"latest",{project:e.project,workspace:e,preserveModifier:!0,cache:s});w&&d.range!==w.range&&E.set(O.identHash,w),f.tick()}E.size&&o.set(u,E),await C}return o}getInstalledVersion({descriptorHash:e,project:r}){let s=r.storedResolutions.get(e);if(s){let n=r.storedPackages.get(s);if(n)return n.version}return null}extractVersionFromRange(e){let r=(0,tn.default)(e,{loose:!0});return r?r.version:e}getUpdateType({fromVersion:e,toVersion:r}){if(!e||!r)return null;try{return(0,en.default)(e,r,{loose:!0})}catch(s){return null}}async applyUpdates({config:e,rulesWithUpdates:r,workspace:s,report:n}){let i=new Map,a=new Map(e.rules),o=0;for(let[u,g]of r.entries()){let h=a.get(u);if(!h)continue;if(e.maxRulesApplied&&o>=e.maxRulesApplied)break;let E=0;for(let[f,C]of g.entries()){if(h.maxPackageUpdates&&E>=h.maxPackageUpdates)break;let $=D.structUtils.stringifyIdent(D.structUtils.convertToIdent(C)),d=s.dependencies.get(f);if(!d)continue;let v=D.structUtils.parseRange(d.range).selector,_=D.structUtils.parseRange(C.range).selector,O=this.getInstalledVersion({descriptorHash:d.descriptorHash,project:s.project}),w=this.extractVersionFromRange(_);if(!(O===w&&e.skipManifestOnlyChanges)){i.set($,{fromRange:v,toRange:_,fromVersion:O,toVersion:w,updateType:this.getUpdateType({fromVersion:O,toVersion:w})}),n.reportInfo(D.MessageName.UNNAMED,`[${u}] ${$}: ${v} -> ${_}`);for(let re of["dependencies","devDependencies"])s.manifest.getForScope(re).has(f)&&s.manifest.getForScope(re).set(f,C);this.dryRun||s.project.forgetResolution(d),E+=1}}E&&(o+=1)}return i}async writeChangeset({changeset:e}){if(!this.changesetFilename)return;let r={};for(let[n,i]of e.entries())r[n]={from_version:i.fromVersion,from_range:i.fromRange,to_version:i.toVersion,to_range:i.toRange,update_type:i.updateType,release_notes:null};let s=JSON.stringify(r,null,2);if(this.changesetFilename==="-")this.context.stdout.write(s);else{let n=he.ppath.resolve(he.ppath.cwd(),he.npath.toPortablePath(this.changesetFilename));await he.xfs.writeFilePromise(n,s,{encoding:"utf8"})}}};lt.paths=[["semver","up"]],lt.usage=ge.Command.Usage({description:"",details:"",examples:[]});var Ua={hooks:{},commands:[lt]},Ma=Ua;return qa;})();
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */
return plugin;
}
};
