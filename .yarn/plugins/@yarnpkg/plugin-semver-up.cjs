/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-semver-up",
factory: function (require) {
"use strict";var plugin=(()=>{var rn=Object.create;var Pe=Object.defineProperty;var sn=Object.getOwnPropertyDescriptor;var nn=Object.getOwnPropertyNames;var an=Object.getPrototypeOf,on=Object.prototype.hasOwnProperty;var un=(t,e,r)=>e in t?Pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var he=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ln=(t,e)=>{for(var r in e)Pe(t,r,{get:e[r],enumerable:!0})},Mt=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of nn(e))!on.call(t,n)&&n!==r&&Pe(t,n,{get:()=>e[n],enumerable:!(s=sn(e,n))||s.enumerable});return t};var ut=(t,e,r)=>(r=t!=null?rn(an(t)):{},Mt(e||!t||!t.__esModule?Pe(r,"default",{value:t,enumerable:!0}):r,t)),cn=t=>Mt(Pe({},"__esModule",{value:!0}),t);var lt=(t,e,r)=>(un(t,typeof e!="symbol"?e+"":e,r),r);var Qe=T(ie=>{"use strict";ie.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1;ie.find=(t,e)=>t.nodes.find(r=>r.type===e);ie.exceedsLimit=(t,e,r=1,s)=>s===!1||!ie.isInteger(t)||!ie.isInteger(e)?!1:(Number(e)-Number(t))/Number(r)>=s;ie.escapeNode=(t,e=0,r)=>{let s=t.nodes[e];!s||(r&&s.type===r||s.type==="open"||s.type==="close")&&s.escaped!==!0&&(s.value="\\"+s.value,s.escaped=!0)};ie.encloseBrace=t=>t.type!=="brace"?!1:t.commas>>0+t.ranges>>0===0?(t.invalid=!0,!0):!1;ie.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:t.commas>>0+t.ranges>>0===0||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1;ie.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0;ie.reduce=t=>t.reduce((e,r)=>(r.type==="text"&&e.push(r.value),r.type==="range"&&(r.type="text"),e),[]);ie.flatten=(...t)=>{let e=[],r=s=>{for(let n=0;n<s.length;n++){let i=s[n];Array.isArray(i)?r(i,e):i!==void 0&&e.push(i)}return e};return r(t),e}});var Ze=T((Ba,kt)=>{"use strict";var Ft=Qe();kt.exports=(t,e={})=>{let r=(s,n={})=>{let i=e.escapeInvalid&&Ft.isInvalidBrace(n),a=s.invalid===!0&&e.escapeInvalid===!0,o="";if(s.value)return(i||a)&&Ft.isOpenOrClose(s)?"\\"+s.value:s.value;if(s.value)return s.value;if(s.nodes)for(let u of s.nodes)o+=r(u);return o};return r(t)}});var Bt=T((Xa,qt)=>{"use strict";qt.exports=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1}});var zt=T((ja,Yt)=>{"use strict";var Xt=Bt(),$e=(t,e,r)=>{if(Xt(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(Xt(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let s={relaxZeros:!0,...r};typeof s.strictZeros=="boolean"&&(s.relaxZeros=s.strictZeros===!1);let n=String(s.relaxZeros),i=String(s.shorthand),a=String(s.capture),o=String(s.wrap),u=t+":"+e+"="+n+i+a+o;if($e.cache.hasOwnProperty(u))return $e.cache[u].result;let g=Math.min(t,e),p=Math.max(t,e);if(Math.abs(g-p)===1){let d=t+"|"+e;return s.capture?`(${d})`:s.wrap===!1?d:`(?:${d})`}let E=Zt(t)||Zt(e),f={min:t,max:e,a:g,b:p},v=[],$=[];if(E&&(f.isPadded=E,f.maxLen=String(f.max).length),g<0){let d=p<0?Math.abs(p):1;$=jt(d,Math.abs(g),f,s),g=f.a=0}return p>=0&&(v=jt(g,p,f,s)),f.negatives=$,f.positives=v,f.result=fn($,v,s),s.capture===!0?f.result=`(${f.result})`:s.wrap!==!1&&v.length+$.length>1&&(f.result=`(?:${f.result})`),$e.cache[u]=f,f.result};function fn(t,e,r){let s=ct(t,e,"-",!1,r)||[],n=ct(e,t,"",!1,r)||[],i=ct(t,e,"-?",!0,r)||[];return s.concat(i).concat(n).join("|")}function pn(t,e){let r=1,s=1,n=Kt(t,r),i=new Set([e]);for(;t<=n&&n<=e;)i.add(n),r+=1,n=Kt(t,r);for(n=Vt(e+1,s)-1;t<n&&n<=e;)i.add(n),s+=1,n=Vt(e+1,s)-1;return i=[...i],i.sort(En),i}function hn(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let s=gn(t,e),n=s.length,i="",a=0;for(let o=0;o<n;o++){let[u,g]=s[o];u===g?i+=u:u!=="0"||g!=="9"?i+=Rn(u,g,r):a++}return a&&(i+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:i,count:[a],digits:n}}function jt(t,e,r,s){let n=pn(t,e),i=[],a=t,o;for(let u=0;u<n.length;u++){let g=n[u],p=hn(String(a),String(g),s),E="";if(!r.isPadded&&o&&o.pattern===p.pattern){o.count.length>1&&o.count.pop(),o.count.push(p.count[0]),o.string=o.pattern+Qt(o.count),a=g+1;continue}r.isPadded&&(E=An(g,r,s)),p.string=E+p.pattern+Qt(p.count),i.push(p),a=g+1,o=p}return i}function ct(t,e,r,s,n){let i=[];for(let a of t){let{string:o}=a;!s&&!Wt(e,"string",o)&&i.push(r+o),s&&Wt(e,"string",o)&&i.push(r+o)}return i}function gn(t,e){let r=[];for(let s=0;s<t.length;s++)r.push([t[s],e[s]]);return r}function En(t,e){return t>e?1:e>t?-1:0}function Wt(t,e,r){return t.some(s=>s[e]===r)}function Kt(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function Vt(t,e){return t-t%Math.pow(10,e)}function Qt(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function Rn(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function Zt(t){return/^-?(0+)\d/.test(t)}function An(t,e,r){if(!e.isPadded)return t;let s=Math.abs(e.maxLen-String(t).length),n=r.relaxZeros!==!1;switch(s){case 0:return"";case 1:return n?"0?":"0";case 2:return n?"0{0,2}":"00";default:return n?`0{0,${s}}`:`0{${s}}`}}$e.cache={};$e.clearCache=()=>$e.cache={};Yt.exports=$e});var ht=T((Wa,ar)=>{"use strict";var dn=he("util"),tr=zt(),Jt=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),yn=t=>e=>t===!0?Number(e):String(e),ft=t=>typeof t=="number"||typeof t=="string"&&t!=="",De=t=>Number.isInteger(+t),pt=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},mn=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,$n=(t,e,r)=>{if(e>0){let s=t[0]==="-"?"-":"";s&&(t=t.slice(1)),t=s+t.padStart(s?e-1:e,"0")}return r===!1?String(t):t},er=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},vn=(t,e)=>{t.negatives.sort((a,o)=>a<o?-1:a>o?1:0),t.positives.sort((a,o)=>a<o?-1:a>o?1:0);let r=e.capture?"":"?:",s="",n="",i;return t.positives.length&&(s=t.positives.join("|")),t.negatives.length&&(n=`-(${r}${t.negatives.join("|")})`),s&&n?i=`${s}|${n}`:i=s||n,e.wrap?`(${r}${i})`:i},rr=(t,e,r,s)=>{if(r)return tr(t,e,{wrap:!1,...s});let n=String.fromCharCode(t);if(t===e)return n;let i=String.fromCharCode(e);return`[${n}-${i}]`},sr=(t,e,r)=>{if(Array.isArray(t)){let s=r.wrap===!0,n=r.capture?"":"?:";return s?`(${n}${t.join("|")})`:t.join("|")}return tr(t,e,r)},nr=(...t)=>new RangeError("Invalid range arguments: "+dn.inspect(...t)),ir=(t,e,r)=>{if(r.strictRanges===!0)throw nr([t,e]);return[]},Cn=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},Sn=(t,e,r=1,s={})=>{let n=Number(t),i=Number(e);if(!Number.isInteger(n)||!Number.isInteger(i)){if(s.strictRanges===!0)throw nr([t,e]);return[]}n===0&&(n=0),i===0&&(i=0);let a=n>i,o=String(t),u=String(e),g=String(r);r=Math.max(Math.abs(r),1);let p=pt(o)||pt(u)||pt(g),E=p?Math.max(o.length,u.length,g.length):0,f=p===!1&&mn(t,e,s)===!1,v=s.transform||yn(f);if(s.toRegex&&r===1)return rr(er(t,E),er(e,E),!0,s);let $={negatives:[],positives:[]},d=O=>$[O<0?"negatives":"positives"].push(Math.abs(O)),C=[],x=0;for(;a?n>=i:n<=i;)s.toRegex===!0&&r>1?d(n):C.push($n(v(n,x),E,f)),n=a?n-r:n+r,x++;return s.toRegex===!0?r>1?vn($,s):sr(C,null,{wrap:!1,...s}):C},xn=(t,e,r=1,s={})=>{if(!De(t)&&t.length>1||!De(e)&&e.length>1)return ir(t,e,s);let n=s.transform||(f=>String.fromCharCode(f)),i=`${t}`.charCodeAt(0),a=`${e}`.charCodeAt(0),o=i>a,u=Math.min(i,a),g=Math.max(i,a);if(s.toRegex&&r===1)return rr(u,g,!1,s);let p=[],E=0;for(;o?i>=a:i<=a;)p.push(n(i,E)),i=o?i-r:i+r,E++;return s.toRegex===!0?sr(p,null,{wrap:!1,options:s}):p},Ye=(t,e,r,s={})=>{if(e==null&&ft(t))return[t];if(!ft(t)||!ft(e))return ir(t,e,s);if(typeof r=="function")return Ye(t,e,1,{transform:r});if(Jt(r))return Ye(t,e,0,r);let n={...s};return n.capture===!0&&(n.wrap=!0),r=r||n.step||1,De(r)?De(t)&&De(e)?Sn(t,e,r,n):xn(t,e,Math.max(Math.abs(r),1),n):r!=null&&!Jt(r)?Cn(r,n):Ye(t,e,1,r)};ar.exports=Ye});var lr=T((Ka,ur)=>{"use strict";var _n=ht(),or=Qe(),Tn=(t,e={})=>{let r=(s,n={})=>{let i=or.isInvalidBrace(n),a=s.invalid===!0&&e.escapeInvalid===!0,o=i===!0||a===!0,u=e.escapeInvalid===!0?"\\":"",g="";if(s.isOpen===!0||s.isClose===!0)return u+s.value;if(s.type==="open")return o?u+s.value:"(";if(s.type==="close")return o?u+s.value:")";if(s.type==="comma")return s.prev.type==="comma"?"":o?s.value:"|";if(s.value)return s.value;if(s.nodes&&s.ranges>0){let p=or.reduce(s.nodes),E=_n(...p,{...e,wrap:!1,toRegex:!0});if(E.length!==0)return p.length>1&&E.length>1?`(${E})`:E}if(s.nodes)for(let p of s.nodes)g+=r(p,s);return g};return r(t)};ur.exports=Tn});var pr=T((Va,fr)=>{"use strict";var In=ht(),cr=Ze(),Ie=Qe(),ve=(t="",e="",r=!1)=>{let s=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?Ie.flatten(e).map(n=>`{${n}}`):e;for(let n of t)if(Array.isArray(n))for(let i of n)s.push(ve(i,e,r));else for(let i of e)r===!0&&typeof i=="string"&&(i=`{${i}}`),s.push(Array.isArray(i)?ve(n,i,r):n+i);return Ie.flatten(s)},Ln=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,s=(n,i={})=>{n.queue=[];let a=i,o=i.queue;for(;a.type!=="brace"&&a.type!=="root"&&a.parent;)a=a.parent,o=a.queue;if(n.invalid||n.dollar){o.push(ve(o.pop(),cr(n,e)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){o.push(ve(o.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){let E=Ie.reduce(n.nodes);if(Ie.exceedsLimit(...E,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let f=In(...E,e);f.length===0&&(f=cr(n,e)),o.push(ve(o.pop(),f)),n.nodes=[];return}let u=Ie.encloseBrace(n),g=n.queue,p=n;for(;p.type!=="brace"&&p.type!=="root"&&p.parent;)p=p.parent,g=p.queue;for(let E=0;E<n.nodes.length;E++){let f=n.nodes[E];if(f.type==="comma"&&n.type==="brace"){E===1&&g.push(""),g.push("");continue}if(f.type==="close"){o.push(ve(o.pop(),g,u));continue}if(f.value&&f.type!=="open"){g.push(ve(g.pop(),f.value));continue}f.nodes&&s(f,n)}return g};return Ie.flatten(s(t))};fr.exports=Ln});var gr=T((Qa,hr)=>{"use strict";hr.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var yr=T((Za,dr)=>{"use strict";var Nn=Ze(),{MAX_LENGTH:Er,CHAR_BACKSLASH:gt,CHAR_BACKTICK:bn,CHAR_COMMA:On,CHAR_DOT:wn,CHAR_LEFT_PARENTHESES:Hn,CHAR_RIGHT_PARENTHESES:Pn,CHAR_LEFT_CURLY_BRACE:Dn,CHAR_RIGHT_CURLY_BRACE:Gn,CHAR_LEFT_SQUARE_BRACKET:Rr,CHAR_RIGHT_SQUARE_BRACKET:Ar,CHAR_DOUBLE_QUOTE:Un,CHAR_SINGLE_QUOTE:Mn,CHAR_NO_BREAK_SPACE:Fn,CHAR_ZERO_WIDTH_NOBREAK_SPACE:kn}=gr(),qn=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let r=e||{},s=typeof r.maxLength=="number"?Math.min(Er,r.maxLength):Er;if(t.length>s)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${s})`);let n={type:"root",input:t,nodes:[]},i=[n],a=n,o=n,u=0,g=t.length,p=0,E=0,f,v={},$=()=>t[p++],d=C=>{if(C.type==="text"&&o.type==="dot"&&(o.type="text"),o&&o.type==="text"&&C.type==="text"){o.value+=C.value;return}return a.nodes.push(C),C.parent=a,C.prev=o,o=C,C};for(d({type:"bos"});p<g;)if(a=i[i.length-1],f=$(),!(f===kn||f===Fn)){if(f===gt){d({type:"text",value:(e.keepEscaping?f:"")+$()});continue}if(f===Ar){d({type:"text",value:"\\"+f});continue}if(f===Rr){u++;let C=!0,x;for(;p<g&&(x=$());){if(f+=x,x===Rr){u++;continue}if(x===gt){f+=$();continue}if(x===Ar&&(u--,u===0))break}d({type:"text",value:f});continue}if(f===Hn){a=d({type:"paren",nodes:[]}),i.push(a),d({type:"text",value:f});continue}if(f===Pn){if(a.type!=="paren"){d({type:"text",value:f});continue}a=i.pop(),d({type:"text",value:f}),a=i[i.length-1];continue}if(f===Un||f===Mn||f===bn){let C=f,x;for(e.keepQuotes!==!0&&(f="");p<g&&(x=$());){if(x===gt){f+=x+$();continue}if(x===C){e.keepQuotes===!0&&(f+=x);break}f+=x}d({type:"text",value:f});continue}if(f===Dn){E++;let x={type:"brace",open:!0,close:!1,dollar:o.value&&o.value.slice(-1)==="$"||a.dollar===!0,depth:E,commas:0,ranges:0,nodes:[]};a=d(x),i.push(a),d({type:"open",value:f});continue}if(f===Gn){if(a.type!=="brace"){d({type:"text",value:f});continue}let C="close";a=i.pop(),a.close=!0,d({type:C,value:f}),E--,a=i[i.length-1];continue}if(f===On&&E>0){if(a.ranges>0){a.ranges=0;let C=a.nodes.shift();a.nodes=[C,{type:"text",value:Nn(a)}]}d({type:"comma",value:f}),a.commas++;continue}if(f===wn&&E>0&&a.commas===0){let C=a.nodes;if(E===0||C.length===0){d({type:"text",value:f});continue}if(o.type==="dot"){if(a.range=[],o.value+=f,o.type="range",a.nodes.length!==3&&a.nodes.length!==5){a.invalid=!0,a.ranges=0,o.type="text";continue}a.ranges++,a.args=[];continue}if(o.type==="range"){C.pop();let x=C[C.length-1];x.value+=o.value+f,o=x,a.ranges--;continue}d({type:"dot",value:f});continue}d({type:"text",value:f})}do if(a=i.pop(),a.type!=="root"){a.nodes.forEach(O=>{O.nodes||(O.type==="open"&&(O.isOpen=!0),O.type==="close"&&(O.isClose=!0),O.nodes||(O.type="text"),O.invalid=!0)});let C=i[i.length-1],x=C.nodes.indexOf(a);C.nodes.splice(x,1,...a.nodes)}while(i.length>0);return d({type:"eos"}),n};dr.exports=qn});var vr=T((Ya,$r)=>{"use strict";var mr=Ze(),Bn=lr(),Xn=pr(),jn=yr(),re=(t,e={})=>{let r=[];if(Array.isArray(t))for(let s of t){let n=re.create(s,e);Array.isArray(n)?r.push(...n):r.push(n)}else r=[].concat(re.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};re.parse=(t,e={})=>jn(t,e);re.stringify=(t,e={})=>mr(typeof t=="string"?re.parse(t,e):t,e);re.compile=(t,e={})=>(typeof t=="string"&&(t=re.parse(t,e)),Bn(t,e));re.expand=(t,e={})=>{typeof t=="string"&&(t=re.parse(t,e));let r=Xn(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r};re.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?re.compile(t,e):re.expand(t,e);$r.exports=re});var Ge=T((za,Tr)=>{"use strict";var Wn=he("path"),le="\\\\/",Cr=`[^${le}]`,ge="\\.",Kn="\\+",Vn="\\?",ze="\\/",Qn="(?=.)",Sr="[^/]",Et=`(?:${ze}|$)`,xr=`(?:^|${ze})`,Rt=`${ge}{1,2}${Et}`,Zn=`(?!${ge})`,Yn=`(?!${xr}${Rt})`,zn=`(?!${ge}{0,1}${Et})`,Jn=`(?!${Rt})`,ei=`[^.${ze}]`,ti=`${Sr}*?`,_r={DOT_LITERAL:ge,PLUS_LITERAL:Kn,QMARK_LITERAL:Vn,SLASH_LITERAL:ze,ONE_CHAR:Qn,QMARK:Sr,END_ANCHOR:Et,DOTS_SLASH:Rt,NO_DOT:Zn,NO_DOTS:Yn,NO_DOT_SLASH:zn,NO_DOTS_SLASH:Jn,QMARK_NO_DOT:ei,STAR:ti,START_ANCHOR:xr},ri={..._r,SLASH_LITERAL:`[${le}]`,QMARK:Cr,STAR:`${Cr}*?`,DOTS_SLASH:`${ge}{1,2}(?:[${le}]|$)`,NO_DOT:`(?!${ge})`,NO_DOTS:`(?!(?:^|[${le}])${ge}{1,2}(?:[${le}]|$))`,NO_DOT_SLASH:`(?!${ge}{0,1}(?:[${le}]|$))`,NO_DOTS_SLASH:`(?!${ge}{1,2}(?:[${le}]|$))`,QMARK_NO_DOT:`[^.${le}]`,START_ANCHOR:`(?:^|[${le}])`,END_ANCHOR:`(?:[${le}]|$)`},si={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};Tr.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:si,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Wn.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?ri:_r}}});var Ue=T(z=>{"use strict";var ni=he("path"),ii=process.platform==="win32",{REGEX_BACKSLASH:ai,REGEX_REMOVE_BACKSLASH:oi,REGEX_SPECIAL_CHARS:ui,REGEX_SPECIAL_CHARS_GLOBAL:li}=Ge();z.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);z.hasRegexChars=t=>ui.test(t);z.isRegexChar=t=>t.length===1&&z.hasRegexChars(t);z.escapeRegex=t=>t.replace(li,"\\$1");z.toPosixSlashes=t=>t.replace(ai,"/");z.removeBackslashes=t=>t.replace(oi,e=>e==="\\"?"":e);z.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};z.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:ii===!0||ni.sep==="\\";z.escapeLast=(t,e,r)=>{let s=t.lastIndexOf(e,r);return s===-1?t:t[s-1]==="\\"?z.escapeLast(t,e,s-1):`${t.slice(0,s)}\\${t.slice(s)}`};z.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};z.wrapOutput=(t,e={},r={})=>{let s=r.contains?"":"^",n=r.contains?"":"$",i=`${s}(?:${t})${n}`;return e.negated===!0&&(i=`(?:^(?!${i}).*$)`),i}});var Pr=T((eo,Hr)=>{"use strict";var Ir=Ue(),{CHAR_ASTERISK:At,CHAR_AT:ci,CHAR_BACKWARD_SLASH:Me,CHAR_COMMA:fi,CHAR_DOT:dt,CHAR_EXCLAMATION_MARK:yt,CHAR_FORWARD_SLASH:wr,CHAR_LEFT_CURLY_BRACE:mt,CHAR_LEFT_PARENTHESES:$t,CHAR_LEFT_SQUARE_BRACKET:pi,CHAR_PLUS:hi,CHAR_QUESTION_MARK:Lr,CHAR_RIGHT_CURLY_BRACE:gi,CHAR_RIGHT_PARENTHESES:Nr,CHAR_RIGHT_SQUARE_BRACKET:Ei}=Ge(),br=t=>t===wr||t===Me,Or=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},Ri=(t,e)=>{let r=e||{},s=t.length-1,n=r.parts===!0||r.scanToEnd===!0,i=[],a=[],o=[],u=t,g=-1,p=0,E=0,f=!1,v=!1,$=!1,d=!1,C=!1,x=!1,O=!1,w=!1,ee=!1,W=!1,de=0,K,S,H={value:"",depth:0,isGlob:!1},j=()=>g>=s,h=()=>u.charCodeAt(g+1),M=()=>(K=S,u.charCodeAt(++g));for(;g<s;){S=M();let V;if(S===Me){O=H.backslashes=!0,S=M(),S===mt&&(x=!0);continue}if(x===!0||S===mt){for(de++;j()!==!0&&(S=M());){if(S===Me){O=H.backslashes=!0,M();continue}if(S===mt){de++;continue}if(x!==!0&&S===dt&&(S=M())===dt){if(f=H.isBrace=!0,$=H.isGlob=!0,W=!0,n===!0)continue;break}if(x!==!0&&S===fi){if(f=H.isBrace=!0,$=H.isGlob=!0,W=!0,n===!0)continue;break}if(S===gi&&(de--,de===0)){x=!1,f=H.isBrace=!0,W=!0;break}}if(n===!0)continue;break}if(S===wr){if(i.push(g),a.push(H),H={value:"",depth:0,isGlob:!1},W===!0)continue;if(K===dt&&g===p+1){p+=2;continue}E=g+1;continue}if(r.noext!==!0&&(S===hi||S===ci||S===At||S===Lr||S===yt)===!0&&h()===$t){if($=H.isGlob=!0,d=H.isExtglob=!0,W=!0,S===yt&&g===p&&(ee=!0),n===!0){for(;j()!==!0&&(S=M());){if(S===Me){O=H.backslashes=!0,S=M();continue}if(S===Nr){$=H.isGlob=!0,W=!0;break}}continue}break}if(S===At){if(K===At&&(C=H.isGlobstar=!0),$=H.isGlob=!0,W=!0,n===!0)continue;break}if(S===Lr){if($=H.isGlob=!0,W=!0,n===!0)continue;break}if(S===pi){for(;j()!==!0&&(V=M());){if(V===Me){O=H.backslashes=!0,M();continue}if(V===Ei){v=H.isBracket=!0,$=H.isGlob=!0,W=!0;break}}if(n===!0)continue;break}if(r.nonegate!==!0&&S===yt&&g===p){w=H.negated=!0,p++;continue}if(r.noparen!==!0&&S===$t){if($=H.isGlob=!0,n===!0){for(;j()!==!0&&(S=M());){if(S===$t){O=H.backslashes=!0,S=M();continue}if(S===Nr){W=!0;break}}continue}break}if($===!0){if(W=!0,n===!0)continue;break}}r.noext===!0&&(d=!1,$=!1);let D=u,ye="",l="";p>0&&(ye=u.slice(0,p),u=u.slice(p),E-=p),D&&$===!0&&E>0?(D=u.slice(0,E),l=u.slice(E)):$===!0?(D="",l=u):D=u,D&&D!==""&&D!=="/"&&D!==u&&br(D.charCodeAt(D.length-1))&&(D=D.slice(0,-1)),r.unescape===!0&&(l&&(l=Ir.removeBackslashes(l)),D&&O===!0&&(D=Ir.removeBackslashes(D)));let c={prefix:ye,input:t,start:p,base:D,glob:l,isBrace:f,isBracket:v,isGlob:$,isExtglob:d,isGlobstar:C,negated:w,negatedExtglob:ee};if(r.tokens===!0&&(c.maxDepth=0,br(S)||a.push(H),c.tokens=a),r.parts===!0||r.tokens===!0){let V;for(let N=0;N<i.length;N++){let oe=V?V+1:p,ue=i[N],te=t.slice(oe,ue);r.tokens&&(N===0&&p!==0?(a[N].isPrefix=!0,a[N].value=ye):a[N].value=te,Or(a[N]),c.maxDepth+=a[N].depth),(N!==0||te!=="")&&o.push(te),V=ue}if(V&&V+1<t.length){let N=t.slice(V+1);o.push(N),r.tokens&&(a[a.length-1].value=N,Or(a[a.length-1]),c.maxDepth+=a[a.length-1].depth)}c.slashes=i,c.parts=o}return c};Hr.exports=Ri});var Ur=T((to,Gr)=>{"use strict";var Je=Ge(),se=Ue(),{MAX_LENGTH:et,POSIX_REGEX_SOURCE:Ai,REGEX_NON_SPECIAL_CHARS:di,REGEX_SPECIAL_CHARS_BACKREF:yi,REPLACEMENTS:Dr}=Je,mi=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(n=>se.escapeRegex(n)).join("..")}return r},Le=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,vt=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=Dr[t]||t;let r={...e},s=typeof r.maxLength=="number"?Math.min(et,r.maxLength):et,n=t.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);let i={type:"bos",value:"",output:r.prepend||""},a=[i],o=r.capture?"":"?:",u=se.isWindows(e),g=Je.globChars(u),p=Je.extglobChars(g),{DOT_LITERAL:E,PLUS_LITERAL:f,SLASH_LITERAL:v,ONE_CHAR:$,DOTS_SLASH:d,NO_DOT:C,NO_DOT_SLASH:x,NO_DOTS_SLASH:O,QMARK:w,QMARK_NO_DOT:ee,STAR:W,START_ANCHOR:de}=g,K=A=>`(${o}(?:(?!${de}${A.dot?d:E}).)*?)`,S=r.dot?"":C,H=r.dot?w:ee,j=r.bash===!0?K(r):W;r.capture&&(j=`(${j})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let h={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};t=se.removePrefix(t,h),n=t.length;let M=[],D=[],ye=[],l=i,c,V=()=>h.index===n-1,N=h.peek=(A=1)=>t[h.index+A],oe=h.advance=()=>t[++h.index]||"",ue=()=>t.slice(h.index+1),te=(A="",G=0)=>{h.consumed+=A,h.index+=G},je=A=>{h.output+=A.output!=null?A.output:A.value,te(A.value)},en=()=>{let A=1;for(;N()==="!"&&(N(2)!=="("||N(3)==="?");)oe(),h.start++,A++;return A%2===0?!1:(h.negated=!0,h.start++,!0)},We=A=>{h[A]++,ye.push(A)},me=A=>{h[A]--,ye.pop()},L=A=>{if(l.type==="globstar"){let G=h.braces>0&&(A.type==="comma"||A.type==="brace"),R=A.extglob===!0||M.length&&(A.type==="pipe"||A.type==="paren");A.type!=="slash"&&A.type!=="paren"&&!G&&!R&&(h.output=h.output.slice(0,-l.output.length),l.type="star",l.value="*",l.output=j,h.output+=l.output)}if(M.length&&A.type!=="paren"&&(M[M.length-1].inner+=A.value),(A.value||A.output)&&je(A),l&&l.type==="text"&&A.type==="text"){l.value+=A.value,l.output=(l.output||"")+A.value;return}A.prev=l,a.push(A),l=A},Ke=(A,G)=>{let R={...p[G],conditions:1,inner:""};R.prev=l,R.parens=h.parens,R.output=h.output;let I=(r.capture?"(":"")+R.open;We("parens"),L({type:A,value:G,output:h.output?"":$}),L({type:"paren",extglob:!0,value:oe(),output:I}),M.push(R)},tn=A=>{let G=A.close+(r.capture?")":""),R;if(A.type==="negate"){let I=j;if(A.inner&&A.inner.length>1&&A.inner.includes("/")&&(I=K(r)),(I!==j||V()||/^\)+$/.test(ue()))&&(G=A.close=`)$))${I}`),A.inner.includes("*")&&(R=ue())&&/^\.[^\\/.]+$/.test(R)){let k=vt(R,{...e,fastpaths:!1}).output;G=A.close=`)${k})${I})`}A.prev.type==="bos"&&(h.negatedExtglob=!0)}L({type:"paren",extglob:!0,value:c,output:G}),me("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let A=!1,G=t.replace(yi,(R,I,k,Q,B,ot)=>Q==="\\"?(A=!0,R):Q==="?"?I?I+Q+(B?w.repeat(B.length):""):ot===0?H+(B?w.repeat(B.length):""):w.repeat(k.length):Q==="."?E.repeat(k.length):Q==="*"?I?I+Q+(B?j:""):j:I?R:`\\${R}`);return A===!0&&(r.unescape===!0?G=G.replace(/\\/g,""):G=G.replace(/\\+/g,R=>R.length%2===0?"\\\\":R?"\\":"")),G===t&&r.contains===!0?(h.output=t,h):(h.output=se.wrapOutput(G,h,e),h)}for(;!V();){if(c=oe(),c==="\0")continue;if(c==="\\"){let R=N();if(R==="/"&&r.bash!==!0||R==="."||R===";")continue;if(!R){c+="\\",L({type:"text",value:c});continue}let I=/^\\+/.exec(ue()),k=0;if(I&&I[0].length>2&&(k=I[0].length,h.index+=k,k%2!==0&&(c+="\\")),r.unescape===!0?c=oe():c+=oe(),h.brackets===0){L({type:"text",value:c});continue}}if(h.brackets>0&&(c!=="]"||l.value==="["||l.value==="[^")){if(r.posix!==!1&&c===":"){let R=l.value.slice(1);if(R.includes("[")&&(l.posix=!0,R.includes(":"))){let I=l.value.lastIndexOf("["),k=l.value.slice(0,I),Q=l.value.slice(I+2),B=Ai[Q];if(B){l.value=k+B,h.backtrack=!0,oe(),!i.output&&a.indexOf(l)===1&&(i.output=$);continue}}}(c==="["&&N()!==":"||c==="-"&&N()==="]")&&(c=`\\${c}`),c==="]"&&(l.value==="["||l.value==="[^")&&(c=`\\${c}`),r.posix===!0&&c==="!"&&l.value==="["&&(c="^"),l.value+=c,je({value:c});continue}if(h.quotes===1&&c!=='"'){c=se.escapeRegex(c),l.value+=c,je({value:c});continue}if(c==='"'){h.quotes=h.quotes===1?0:1,r.keepQuotes===!0&&L({type:"text",value:c});continue}if(c==="("){We("parens"),L({type:"paren",value:c});continue}if(c===")"){if(h.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Le("opening","("));let R=M[M.length-1];if(R&&h.parens===R.parens+1){tn(M.pop());continue}L({type:"paren",value:c,output:h.parens?")":"\\)"}),me("parens");continue}if(c==="["){if(r.nobracket===!0||!ue().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Le("closing","]"));c=`\\${c}`}else We("brackets");L({type:"bracket",value:c});continue}if(c==="]"){if(r.nobracket===!0||l&&l.type==="bracket"&&l.value.length===1){L({type:"text",value:c,output:`\\${c}`});continue}if(h.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Le("opening","["));L({type:"text",value:c,output:`\\${c}`});continue}me("brackets");let R=l.value.slice(1);if(l.posix!==!0&&R[0]==="^"&&!R.includes("/")&&(c=`/${c}`),l.value+=c,je({value:c}),r.literalBrackets===!1||se.hasRegexChars(R))continue;let I=se.escapeRegex(l.value);if(h.output=h.output.slice(0,-l.value.length),r.literalBrackets===!0){h.output+=I,l.value=I;continue}l.value=`(${o}${I}|${l.value})`,h.output+=l.value;continue}if(c==="{"&&r.nobrace!==!0){We("braces");let R={type:"brace",value:c,output:"(",outputIndex:h.output.length,tokensIndex:h.tokens.length};D.push(R),L(R);continue}if(c==="}"){let R=D[D.length-1];if(r.nobrace===!0||!R){L({type:"text",value:c,output:c});continue}let I=")";if(R.dots===!0){let k=a.slice(),Q=[];for(let B=k.length-1;B>=0&&(a.pop(),k[B].type!=="brace");B--)k[B].type!=="dots"&&Q.unshift(k[B].value);I=mi(Q,r),h.backtrack=!0}if(R.comma!==!0&&R.dots!==!0){let k=h.output.slice(0,R.outputIndex),Q=h.tokens.slice(R.tokensIndex);R.value=R.output="\\{",c=I="\\}",h.output=k;for(let B of Q)h.output+=B.output||B.value}L({type:"brace",value:c,output:I}),me("braces"),D.pop();continue}if(c==="|"){M.length>0&&M[M.length-1].conditions++,L({type:"text",value:c});continue}if(c===","){let R=c,I=D[D.length-1];I&&ye[ye.length-1]==="braces"&&(I.comma=!0,R="|"),L({type:"comma",value:c,output:R});continue}if(c==="/"){if(l.type==="dot"&&h.index===h.start+1){h.start=h.index+1,h.consumed="",h.output="",a.pop(),l=i;continue}L({type:"slash",value:c,output:v});continue}if(c==="."){if(h.braces>0&&l.type==="dot"){l.value==="."&&(l.output=E);let R=D[D.length-1];l.type="dots",l.output+=c,l.value+=c,R.dots=!0;continue}if(h.braces+h.parens===0&&l.type!=="bos"&&l.type!=="slash"){L({type:"text",value:c,output:E});continue}L({type:"dot",value:c,output:E});continue}if(c==="?"){if(!(l&&l.value==="(")&&r.noextglob!==!0&&N()==="("&&N(2)!=="?"){Ke("qmark",c);continue}if(l&&l.type==="paren"){let I=N(),k=c;if(I==="<"&&!se.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(l.value==="("&&!/[!=<:]/.test(I)||I==="<"&&!/<([!=]|\w+>)/.test(ue()))&&(k=`\\${c}`),L({type:"text",value:c,output:k});continue}if(r.dot!==!0&&(l.type==="slash"||l.type==="bos")){L({type:"qmark",value:c,output:ee});continue}L({type:"qmark",value:c,output:w});continue}if(c==="!"){if(r.noextglob!==!0&&N()==="("&&(N(2)!=="?"||!/[!=<:]/.test(N(3)))){Ke("negate",c);continue}if(r.nonegate!==!0&&h.index===0){en();continue}}if(c==="+"){if(r.noextglob!==!0&&N()==="("&&N(2)!=="?"){Ke("plus",c);continue}if(l&&l.value==="("||r.regex===!1){L({type:"plus",value:c,output:f});continue}if(l&&(l.type==="bracket"||l.type==="paren"||l.type==="brace")||h.parens>0){L({type:"plus",value:c});continue}L({type:"plus",value:f});continue}if(c==="@"){if(r.noextglob!==!0&&N()==="("&&N(2)!=="?"){L({type:"at",extglob:!0,value:c,output:""});continue}L({type:"text",value:c});continue}if(c!=="*"){(c==="$"||c==="^")&&(c=`\\${c}`);let R=di.exec(ue());R&&(c+=R[0],h.index+=R[0].length),L({type:"text",value:c});continue}if(l&&(l.type==="globstar"||l.star===!0)){l.type="star",l.star=!0,l.value+=c,l.output=j,h.backtrack=!0,h.globstar=!0,te(c);continue}let A=ue();if(r.noextglob!==!0&&/^\([^?]/.test(A)){Ke("star",c);continue}if(l.type==="star"){if(r.noglobstar===!0){te(c);continue}let R=l.prev,I=R.prev,k=R.type==="slash"||R.type==="bos",Q=I&&(I.type==="star"||I.type==="globstar");if(r.bash===!0&&(!k||A[0]&&A[0]!=="/")){L({type:"star",value:c,output:""});continue}let B=h.braces>0&&(R.type==="comma"||R.type==="brace"),ot=M.length&&(R.type==="pipe"||R.type==="paren");if(!k&&R.type!=="paren"&&!B&&!ot){L({type:"star",value:c,output:""});continue}for(;A.slice(0,3)==="/**";){let Ve=t[h.index+4];if(Ve&&Ve!=="/")break;A=A.slice(3),te("/**",3)}if(R.type==="bos"&&V()){l.type="globstar",l.value+=c,l.output=K(r),h.output=l.output,h.globstar=!0,te(c);continue}if(R.type==="slash"&&R.prev.type!=="bos"&&!Q&&V()){h.output=h.output.slice(0,-(R.output+l.output).length),R.output=`(?:${R.output}`,l.type="globstar",l.output=K(r)+(r.strictSlashes?")":"|$)"),l.value+=c,h.globstar=!0,h.output+=R.output+l.output,te(c);continue}if(R.type==="slash"&&R.prev.type!=="bos"&&A[0]==="/"){let Ve=A[1]!==void 0?"|$":"";h.output=h.output.slice(0,-(R.output+l.output).length),R.output=`(?:${R.output}`,l.type="globstar",l.output=`${K(r)}${v}|${v}${Ve})`,l.value+=c,h.output+=R.output+l.output,h.globstar=!0,te(c+oe()),L({type:"slash",value:"/",output:""});continue}if(R.type==="bos"&&A[0]==="/"){l.type="globstar",l.value+=c,l.output=`(?:^|${v}|${K(r)}${v})`,h.output=l.output,h.globstar=!0,te(c+oe()),L({type:"slash",value:"/",output:""});continue}h.output=h.output.slice(0,-l.output.length),l.type="globstar",l.output=K(r),l.value+=c,h.output+=l.output,h.globstar=!0,te(c);continue}let G={type:"star",value:c,output:j};if(r.bash===!0){G.output=".*?",(l.type==="bos"||l.type==="slash")&&(G.output=S+G.output),L(G);continue}if(l&&(l.type==="bracket"||l.type==="paren")&&r.regex===!0){G.output=c,L(G);continue}(h.index===h.start||l.type==="slash"||l.type==="dot")&&(l.type==="dot"?(h.output+=x,l.output+=x):r.dot===!0?(h.output+=O,l.output+=O):(h.output+=S,l.output+=S),N()!=="*"&&(h.output+=$,l.output+=$)),L(G)}for(;h.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing","]"));h.output=se.escapeLast(h.output,"["),me("brackets")}for(;h.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing",")"));h.output=se.escapeLast(h.output,"("),me("parens")}for(;h.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing","}"));h.output=se.escapeLast(h.output,"{"),me("braces")}if(r.strictSlashes!==!0&&(l.type==="star"||l.type==="bracket")&&L({type:"maybe_slash",value:"",output:`${v}?`}),h.backtrack===!0){h.output="";for(let A of h.tokens)h.output+=A.output!=null?A.output:A.value,A.suffix&&(h.output+=A.suffix)}return h};vt.fastpaths=(t,e)=>{let r={...e},s=typeof r.maxLength=="number"?Math.min(et,r.maxLength):et,n=t.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);t=Dr[t]||t;let i=se.isWindows(e),{DOT_LITERAL:a,SLASH_LITERAL:o,ONE_CHAR:u,DOTS_SLASH:g,NO_DOT:p,NO_DOTS:E,NO_DOTS_SLASH:f,STAR:v,START_ANCHOR:$}=Je.globChars(i),d=r.dot?E:p,C=r.dot?f:p,x=r.capture?"":"?:",O={negated:!1,prefix:""},w=r.bash===!0?".*?":v;r.capture&&(w=`(${w})`);let ee=S=>S.noglobstar===!0?w:`(${x}(?:(?!${$}${S.dot?g:a}).)*?)`,W=S=>{switch(S){case"*":return`${d}${u}${w}`;case".*":return`${a}${u}${w}`;case"*.*":return`${d}${w}${a}${u}${w}`;case"*/*":return`${d}${w}${o}${u}${C}${w}`;case"**":return d+ee(r);case"**/*":return`(?:${d}${ee(r)}${o})?${C}${u}${w}`;case"**/*.*":return`(?:${d}${ee(r)}${o})?${C}${w}${a}${u}${w}`;case"**/.*":return`(?:${d}${ee(r)}${o})?${a}${u}${w}`;default:{let H=/^(.*?)\.(\w+)$/.exec(S);if(!H)return;let j=W(H[1]);return j?j+a+H[2]:void 0}}},de=se.removePrefix(t,O),K=W(de);return K&&r.strictSlashes!==!0&&(K+=`${o}?`),K};Gr.exports=vt});var Fr=T((ro,Mr)=>{"use strict";var $i=he("path"),vi=Pr(),Ct=Ur(),St=Ue(),Ci=Ge(),Si=t=>t&&typeof t=="object"&&!Array.isArray(t),q=(t,e,r=!1)=>{if(Array.isArray(t)){let p=t.map(f=>q(f,e,r));return f=>{for(let v of p){let $=v(f);if($)return $}return!1}}let s=Si(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");let n=e||{},i=St.isWindows(e),a=s?q.compileRe(t,e):q.makeRe(t,e,!1,!0),o=a.state;delete a.state;let u=()=>!1;if(n.ignore){let p={...e,ignore:null,onMatch:null,onResult:null};u=q(n.ignore,p,r)}let g=(p,E=!1)=>{let{isMatch:f,match:v,output:$}=q.test(p,a,e,{glob:t,posix:i}),d={glob:t,state:o,regex:a,posix:i,input:p,output:$,match:v,isMatch:f};return typeof n.onResult=="function"&&n.onResult(d),f===!1?(d.isMatch=!1,E?d:!1):u(p)?(typeof n.onIgnore=="function"&&n.onIgnore(d),d.isMatch=!1,E?d:!1):(typeof n.onMatch=="function"&&n.onMatch(d),E?d:!0)};return r&&(g.state=o),g};q.test=(t,e,r,{glob:s,posix:n}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let i=r||{},a=i.format||(n?St.toPosixSlashes:null),o=t===s,u=o&&a?a(t):t;return o===!1&&(u=a?a(t):t,o=u===s),(o===!1||i.capture===!0)&&(i.matchBase===!0||i.basename===!0?o=q.matchBase(t,e,r,n):o=e.exec(u)),{isMatch:Boolean(o),match:o,output:u}};q.matchBase=(t,e,r,s=St.isWindows(r))=>(e instanceof RegExp?e:q.makeRe(e,r)).test($i.basename(t));q.isMatch=(t,e,r)=>q(e,r)(t);q.parse=(t,e)=>Array.isArray(t)?t.map(r=>q.parse(r,e)):Ct(t,{...e,fastpaths:!1});q.scan=(t,e)=>vi(t,e);q.compileRe=(t,e,r=!1,s=!1)=>{if(r===!0)return t.output;let n=e||{},i=n.contains?"":"^",a=n.contains?"":"$",o=`${i}(?:${t.output})${a}`;t&&t.negated===!0&&(o=`^(?!${o}).*$`);let u=q.toRegex(o,e);return s===!0&&(u.state=t),u};q.makeRe=(t,e={},r=!1,s=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(n.output=Ct.fastpaths(t,e)),n.output||(n=Ct(t,e)),q.compileRe(n,e,r,s)};q.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};q.constants=Ci;Mr.exports=q});var qr=T((so,kr)=>{"use strict";kr.exports=Fr()});var Kr=T((no,Wr)=>{"use strict";var Xr=he("util"),jr=vr(),ce=qr(),xt=Ue(),Br=t=>t===""||t==="./",F=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let s=new Set,n=new Set,i=new Set,a=0,o=p=>{i.add(p.output),r&&r.onResult&&r.onResult(p)};for(let p=0;p<e.length;p++){let E=ce(String(e[p]),{...r,onResult:o},!0),f=E.state.negated||E.state.negatedExtglob;f&&a++;for(let v of t){let $=E(v,!0);!(f?!$.isMatch:$.isMatch)||(f?s.add($.output):(s.delete($.output),n.add($.output)))}}let g=(a===e.length?[...i]:[...n]).filter(p=>!s.has(p));if(r&&g.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(p=>p.replace(/\\/g,"")):e}return g};F.match=F;F.matcher=(t,e)=>ce(t,e);F.isMatch=(t,e,r)=>ce(e,r)(t);F.any=F.isMatch;F.not=(t,e,r={})=>{e=[].concat(e).map(String);let s=new Set,n=[],i=o=>{r.onResult&&r.onResult(o),n.push(o.output)},a=new Set(F(t,e,{...r,onResult:i}));for(let o of n)a.has(o)||s.add(o);return[...s]};F.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Xr.inspect(t)}"`);if(Array.isArray(e))return e.some(s=>F.contains(t,s,r));if(typeof e=="string"){if(Br(t)||Br(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return F.isMatch(t,e,{...r,contains:!0})};F.matchKeys=(t,e,r)=>{if(!xt.isObject(t))throw new TypeError("Expected the first argument to be an object");let s=F(Object.keys(t),e,r),n={};for(let i of s)n[i]=t[i];return n};F.some=(t,e,r)=>{let s=[].concat(t);for(let n of[].concat(e)){let i=ce(String(n),r);if(s.some(a=>i(a)))return!0}return!1};F.every=(t,e,r)=>{let s=[].concat(t);for(let n of[].concat(e)){let i=ce(String(n),r);if(!s.every(a=>i(a)))return!1}return!0};F.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Xr.inspect(t)}"`);return[].concat(e).every(s=>ce(s,r)(t))};F.capture=(t,e,r)=>{let s=xt.isWindows(r),i=ce.makeRe(String(t),{...r,capture:!0}).exec(s?xt.toPosixSlashes(e):e);if(i)return i.slice(1).map(a=>a===void 0?"":a)};F.makeRe=(...t)=>ce.makeRe(...t);F.scan=(...t)=>ce.scan(...t);F.parse=(t,e)=>{let r=[];for(let s of[].concat(t||[]))for(let n of jr(String(s),e))r.push(ce.parse(n,e));return r};F.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!/\{.*\}/.test(t)?[t]:jr(t,e)};F.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return F.braces(t,{...e,expand:!0})};Wr.exports=F});var Fe=T((io,Vr)=>{var xi=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Vr.exports=xi});var tt=T((ao,Qr)=>{var _i="2.0.0",Ti=Number.MAX_SAFE_INTEGER||9007199254740991,Ii=16,Li=256-6,Ni=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Qr.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Ii,MAX_SAFE_BUILD_LENGTH:Li,MAX_SAFE_INTEGER:Ti,RELEASE_TYPES:Ni,SEMVER_SPEC_VERSION:_i,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var rt=T((Ee,Zr)=>{var{MAX_SAFE_COMPONENT_LENGTH:_t,MAX_SAFE_BUILD_LENGTH:bi,MAX_LENGTH:Oi}=tt(),wi=Fe();Ee=Zr.exports={};var Hi=Ee.re=[],Pi=Ee.safeRe=[],y=Ee.src=[],m=Ee.t={},Di=0,Tt="[a-zA-Z0-9-]",Gi=[["\\s",1],["\\d",Oi],[Tt,bi]],Ui=t=>{for(let[e,r]of Gi)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},_=(t,e,r)=>{let s=Ui(e),n=Di++;wi(t,n,e),m[t]=n,y[n]=e,Hi[n]=new RegExp(e,r?"g":void 0),Pi[n]=new RegExp(s,r?"g":void 0)};_("NUMERICIDENTIFIER","0|[1-9]\\d*");_("NUMERICIDENTIFIERLOOSE","\\d+");_("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Tt}*`);_("MAINVERSION",`(${y[m.NUMERICIDENTIFIER]})\\.(${y[m.NUMERICIDENTIFIER]})\\.(${y[m.NUMERICIDENTIFIER]})`);_("MAINVERSIONLOOSE",`(${y[m.NUMERICIDENTIFIERLOOSE]})\\.(${y[m.NUMERICIDENTIFIERLOOSE]})\\.(${y[m.NUMERICIDENTIFIERLOOSE]})`);_("PRERELEASEIDENTIFIER",`(?:${y[m.NUMERICIDENTIFIER]}|${y[m.NONNUMERICIDENTIFIER]})`);_("PRERELEASEIDENTIFIERLOOSE",`(?:${y[m.NUMERICIDENTIFIERLOOSE]}|${y[m.NONNUMERICIDENTIFIER]})`);_("PRERELEASE",`(?:-(${y[m.PRERELEASEIDENTIFIER]}(?:\\.${y[m.PRERELEASEIDENTIFIER]})*))`);_("PRERELEASELOOSE",`(?:-?(${y[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${y[m.PRERELEASEIDENTIFIERLOOSE]})*))`);_("BUILDIDENTIFIER",`${Tt}+`);_("BUILD",`(?:\\+(${y[m.BUILDIDENTIFIER]}(?:\\.${y[m.BUILDIDENTIFIER]})*))`);_("FULLPLAIN",`v?${y[m.MAINVERSION]}${y[m.PRERELEASE]}?${y[m.BUILD]}?`);_("FULL",`^${y[m.FULLPLAIN]}$`);_("LOOSEPLAIN",`[v=\\s]*${y[m.MAINVERSIONLOOSE]}${y[m.PRERELEASELOOSE]}?${y[m.BUILD]}?`);_("LOOSE",`^${y[m.LOOSEPLAIN]}$`);_("GTLT","((?:<|>)?=?)");_("XRANGEIDENTIFIERLOOSE",`${y[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);_("XRANGEIDENTIFIER",`${y[m.NUMERICIDENTIFIER]}|x|X|\\*`);_("XRANGEPLAIN",`[v=\\s]*(${y[m.XRANGEIDENTIFIER]})(?:\\.(${y[m.XRANGEIDENTIFIER]})(?:\\.(${y[m.XRANGEIDENTIFIER]})(?:${y[m.PRERELEASE]})?${y[m.BUILD]}?)?)?`);_("XRANGEPLAINLOOSE",`[v=\\s]*(${y[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${y[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${y[m.XRANGEIDENTIFIERLOOSE]})(?:${y[m.PRERELEASELOOSE]})?${y[m.BUILD]}?)?)?`);_("XRANGE",`^${y[m.GTLT]}\\s*${y[m.XRANGEPLAIN]}$`);_("XRANGELOOSE",`^${y[m.GTLT]}\\s*${y[m.XRANGEPLAINLOOSE]}$`);_("COERCE",`(^|[^\\d])(\\d{1,${_t}})(?:\\.(\\d{1,${_t}}))?(?:\\.(\\d{1,${_t}}))?(?:$|[^\\d])`);_("COERCERTL",y[m.COERCE],!0);_("LONETILDE","(?:~>?)");_("TILDETRIM",`(\\s*)${y[m.LONETILDE]}\\s+`,!0);Ee.tildeTrimReplace="$1~";_("TILDE",`^${y[m.LONETILDE]}${y[m.XRANGEPLAIN]}$`);_("TILDELOOSE",`^${y[m.LONETILDE]}${y[m.XRANGEPLAINLOOSE]}$`);_("LONECARET","(?:\\^)");_("CARETTRIM",`(\\s*)${y[m.LONECARET]}\\s+`,!0);Ee.caretTrimReplace="$1^";_("CARET",`^${y[m.LONECARET]}${y[m.XRANGEPLAIN]}$`);_("CARETLOOSE",`^${y[m.LONECARET]}${y[m.XRANGEPLAINLOOSE]}$`);_("COMPARATORLOOSE",`^${y[m.GTLT]}\\s*(${y[m.LOOSEPLAIN]})$|^$`);_("COMPARATOR",`^${y[m.GTLT]}\\s*(${y[m.FULLPLAIN]})$|^$`);_("COMPARATORTRIM",`(\\s*)${y[m.GTLT]}\\s*(${y[m.LOOSEPLAIN]}|${y[m.XRANGEPLAIN]})`,!0);Ee.comparatorTrimReplace="$1$2$3";_("HYPHENRANGE",`^\\s*(${y[m.XRANGEPLAIN]})\\s+-\\s+(${y[m.XRANGEPLAIN]})\\s*$`);_("HYPHENRANGELOOSE",`^\\s*(${y[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${y[m.XRANGEPLAINLOOSE]})\\s*$`);_("STAR","(<|>)?=?\\s*\\*");_("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");_("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var st=T((oo,Yr)=>{var Mi=Object.freeze({loose:!0}),Fi=Object.freeze({}),ki=t=>t?typeof t!="object"?Mi:t:Fi;Yr.exports=ki});var ts=T((uo,es)=>{var zr=/^[0-9]+$/,Jr=(t,e)=>{let r=zr.test(t),s=zr.test(e);return r&&s&&(t=+t,e=+e),t===e?0:r&&!s?-1:s&&!r?1:t<e?-1:1},qi=(t,e)=>Jr(e,t);es.exports={compareIdentifiers:Jr,rcompareIdentifiers:qi}});var be=T((lo,is)=>{var nt=Fe(),{MAX_LENGTH:rs,MAX_SAFE_INTEGER:it}=tt(),{safeRe:ss,t:ns}=rt(),Bi=st(),{compareIdentifiers:Ne}=ts(),ne=class{constructor(e,r){if(r=Bi(r),e instanceof ne){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>rs)throw new TypeError(`version is longer than ${rs} characters`);nt("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let s=e.trim().match(r.loose?ss[ns.LOOSE]:ss[ns.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>it||this.major<0)throw new TypeError("Invalid major version");if(this.minor>it||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>it||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let i=+n;if(i>=0&&i<it)return i}return n}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(nt("SemVer.compare",this.version,this.options,e),!(e instanceof ne)){if(typeof e=="string"&&e===this.version)return 0;e=new ne(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ne||(e=new ne(e,this.options)),Ne(this.major,e.major)||Ne(this.minor,e.minor)||Ne(this.patch,e.patch)}comparePre(e){if(e instanceof ne||(e=new ne(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let s=this.prerelease[r],n=e.prerelease[r];if(nt("prerelease compare",r,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return Ne(s,n)}while(++r)}compareBuild(e){e instanceof ne||(e=new ne(e,this.options));let r=0;do{let s=this.build[r],n=e.build[r];if(nt("prerelease compare",r,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return Ne(s,n)}while(++r)}inc(e,r,s){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,s),this.inc("pre",r,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,s),this.inc("pre",r,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(s)?1:0;if(!r&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[n];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(r){let i=[r,n];s===!1&&(i=[r]),Ne(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};is.exports=ne});var us=T((co,os)=>{var as=be(),Xi=(t,e,r=!1)=>{if(t instanceof as)return t;try{return new as(t,e)}catch(s){if(!r)return null;throw s}};os.exports=Xi});var fs=T((fo,cs)=>{var ls=us(),ji=(t,e)=>{let r=ls(t,null,!0),s=ls(e,null,!0),n=r.compare(s);if(n===0)return null;let i=n>0,a=i?r:s,o=i?s:r,u=!!a.prerelease.length;if(!!o.prerelease.length&&!u)return!o.patch&&!o.minor?"major":a.patch?"patch":a.minor?"minor":"major";let p=u?"pre":"";return r.major!==s.major?p+"major":r.minor!==s.minor?p+"minor":r.patch!==s.patch?p+"patch":"prerelease"};cs.exports=ji});var hs=T((po,ps)=>{"use strict";ps.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Es=T((ho,gs)=>{"use strict";gs.exports=b;b.Node=Ce;b.create=b;function b(t){var e=this;if(e instanceof b||(e=new b),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)e.push(arguments[r]);return e}b.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};b.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};b.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};b.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Ki(this,arguments[t]);return this.length};b.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Vi(this,arguments[t]);return this.length};b.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};b.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};b.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,s=0;r!==null;s++)t.call(e,r.value,s,this),r=r.next};b.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,s=this.length-1;r!==null;s--)t.call(e,r.value,s,this),r=r.prev};b.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};b.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};b.prototype.map=function(t,e){e=e||this;for(var r=new b,s=this.head;s!==null;)r.push(t.call(e,s.value,this)),s=s.next;return r};b.prototype.mapReverse=function(t,e){e=e||this;for(var r=new b,s=this.tail;s!==null;)r.push(t.call(e,s.value,this)),s=s.prev;return r};b.prototype.reduce=function(t,e){var r,s=this.head;if(arguments.length>1)r=e;else if(this.head)s=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;s!==null;n++)r=t(r,s.value,n),s=s.next;return r};b.prototype.reduceReverse=function(t,e){var r,s=this.tail;if(arguments.length>1)r=e;else if(this.tail)s=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;s!==null;n--)r=t(r,s.value,n),s=s.prev;return r};b.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};b.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};b.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new b;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=0,n=this.head;n!==null&&s<t;s++)n=n.next;for(;n!==null&&s<e;s++,n=n.next)r.push(n.value);return r};b.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new b;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=this.length,n=this.tail;n!==null&&s>e;s--)n=n.prev;for(;n!==null&&s>t;s--,n=n.prev)r.push(n.value);return r};b.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var s=0,n=this.head;n!==null&&s<t;s++)n=n.next;for(var i=[],s=0;n&&s<e;s++)i.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var s=0;s<r.length;s++)n=Wi(this,n,r[s]);return i};b.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var s=r.prev;r.prev=r.next,r.next=s}return this.head=e,this.tail=t,this};function Wi(t,e,r){var s=e===t.head?new Ce(r,null,e,t):new Ce(r,e,e.next,t);return s.next===null&&(t.tail=s),s.prev===null&&(t.head=s),t.length++,s}function Ki(t,e){t.tail=new Ce(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Vi(t,e){t.head=new Ce(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Ce(t,e,r,s){if(!(this instanceof Ce))return new Ce(t,e,r,s);this.list=s,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{hs()(b)}catch{}});var ms=T((go,ys)=>{"use strict";var Qi=Es(),Se=Symbol("max"),Ae=Symbol("length"),Oe=Symbol("lengthCalculator"),qe=Symbol("allowStale"),xe=Symbol("maxAge"),Re=Symbol("dispose"),Rs=Symbol("noDisposeOnSet"),X=Symbol("lruList"),ae=Symbol("cache"),ds=Symbol("updateAgeOnGet"),It=()=>1,Nt=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Se]=e.max||1/0,s=e.length||It;if(this[Oe]=typeof s!="function"?It:s,this[qe]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[xe]=e.maxAge||0,this[Re]=e.dispose,this[Rs]=e.noDisposeOnSet||!1,this[ds]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Se]=e||1/0,ke(this)}get max(){return this[Se]}set allowStale(e){this[qe]=!!e}get allowStale(){return this[qe]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[xe]=e,ke(this)}get maxAge(){return this[xe]}set lengthCalculator(e){typeof e!="function"&&(e=It),e!==this[Oe]&&(this[Oe]=e,this[Ae]=0,this[X].forEach(r=>{r.length=this[Oe](r.value,r.key),this[Ae]+=r.length})),ke(this)}get lengthCalculator(){return this[Oe]}get length(){return this[Ae]}get itemCount(){return this[X].length}rforEach(e,r){r=r||this;for(let s=this[X].tail;s!==null;){let n=s.prev;As(this,e,s,r),s=n}}forEach(e,r){r=r||this;for(let s=this[X].head;s!==null;){let n=s.next;As(this,e,s,r),s=n}}keys(){return this[X].toArray().map(e=>e.key)}values(){return this[X].toArray().map(e=>e.value)}reset(){this[Re]&&this[X]&&this[X].length&&this[X].forEach(e=>this[Re](e.key,e.value)),this[ae]=new Map,this[X]=new Qi,this[Ae]=0}dump(){return this[X].map(e=>at(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[X]}set(e,r,s){if(s=s||this[xe],s&&typeof s!="number")throw new TypeError("maxAge must be a number");let n=s?Date.now():0,i=this[Oe](r,e);if(this[ae].has(e)){if(i>this[Se])return we(this,this[ae].get(e)),!1;let u=this[ae].get(e).value;return this[Re]&&(this[Rs]||this[Re](e,u.value)),u.now=n,u.maxAge=s,u.value=r,this[Ae]+=i-u.length,u.length=i,this.get(e),ke(this),!0}let a=new bt(e,r,i,n,s);return a.length>this[Se]?(this[Re]&&this[Re](e,r),!1):(this[Ae]+=a.length,this[X].unshift(a),this[ae].set(e,this[X].head),ke(this),!0)}has(e){if(!this[ae].has(e))return!1;let r=this[ae].get(e).value;return!at(this,r)}get(e){return Lt(this,e,!0)}peek(e){return Lt(this,e,!1)}pop(){let e=this[X].tail;return e?(we(this,e),e.value):null}del(e){we(this,this[ae].get(e))}load(e){this.reset();let r=Date.now();for(let s=e.length-1;s>=0;s--){let n=e[s],i=n.e||0;if(i===0)this.set(n.k,n.v);else{let a=i-r;a>0&&this.set(n.k,n.v,a)}}}prune(){this[ae].forEach((e,r)=>Lt(this,r,!1))}},Lt=(t,e,r)=>{let s=t[ae].get(e);if(s){let n=s.value;if(at(t,n)){if(we(t,s),!t[qe])return}else r&&(t[ds]&&(s.value.now=Date.now()),t[X].unshiftNode(s));return n.value}},at=(t,e)=>{if(!e||!e.maxAge&&!t[xe])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[xe]&&r>t[xe]},ke=t=>{if(t[Ae]>t[Se])for(let e=t[X].tail;t[Ae]>t[Se]&&e!==null;){let r=e.prev;we(t,e),e=r}},we=(t,e)=>{if(e){let r=e.value;t[Re]&&t[Re](r.key,r.value),t[Ae]-=r.length,t[ae].delete(r.key),t[X].removeNode(e)}},bt=class{constructor(e,r,s,n,i){this.key=e,this.value=r,this.length=s,this.now=n,this.maxAge=i||0}},As=(t,e,r,s)=>{let n=r.value;at(t,n)&&(we(t,r),t[qe]||(n=void 0)),n&&e.call(s,n.value,n.key,t)};ys.exports=Nt});var _e=T((Eo,vs)=>{var $s=be(),Zi=(t,e,r)=>new $s(t,r).compare(new $s(e,r));vs.exports=Zi});var Ss=T((Ro,Cs)=>{var Yi=_e(),zi=(t,e,r)=>Yi(t,e,r)===0;Cs.exports=zi});var _s=T((Ao,xs)=>{var Ji=_e(),ea=(t,e,r)=>Ji(t,e,r)!==0;xs.exports=ea});var Ot=T((yo,Ts)=>{var ta=_e(),ra=(t,e,r)=>ta(t,e,r)>0;Ts.exports=ra});var Ls=T((mo,Is)=>{var sa=_e(),na=(t,e,r)=>sa(t,e,r)>=0;Is.exports=na});var bs=T(($o,Ns)=>{var ia=_e(),aa=(t,e,r)=>ia(t,e,r)<0;Ns.exports=aa});var ws=T((vo,Os)=>{var oa=_e(),ua=(t,e,r)=>oa(t,e,r)<=0;Os.exports=ua});var Ps=T((Co,Hs)=>{var la=Ss(),ca=_s(),fa=Ot(),pa=Ls(),ha=bs(),ga=ws(),Ea=(t,e,r,s)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return la(t,r,s);case"!=":return ca(t,r,s);case">":return fa(t,r,s);case">=":return pa(t,r,s);case"<":return ha(t,r,s);case"<=":return ga(t,r,s);default:throw new TypeError(`Invalid operator: ${e}`)}};Hs.exports=Ea});var qs=T((So,ks)=>{var Be=Symbol("SemVer ANY"),He=class{static get ANY(){return Be}constructor(e,r){if(r=Ds(r),e instanceof He){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Ht("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Be?this.value="":this.value=this.operator+this.semver.version,Ht("comp",this)}parse(e){let r=this.options.loose?Gs[Us.COMPARATORLOOSE]:Gs[Us.COMPARATOR],s=e.match(r);if(!s)throw new TypeError(`Invalid comparator: ${e}`);this.operator=s[1]!==void 0?s[1]:"",this.operator==="="&&(this.operator=""),s[2]?this.semver=new Ms(s[2],this.options.loose):this.semver=Be}toString(){return this.value}test(e){if(Ht("Comparator.test",e,this.options.loose),this.semver===Be||e===Be)return!0;if(typeof e=="string")try{e=new Ms(e,this.options)}catch{return!1}return wt(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof He))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Fs(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new Fs(this.value,r).test(e.semver):(r=Ds(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||wt(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||wt(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};ks.exports=He;var Ds=st(),{safeRe:Gs,t:Us}=rt(),wt=Ps(),Ht=Fe(),Ms=be(),Fs=Pt()});var Pt=T((xo,Ws)=>{var Te=class{constructor(e,r){if(r=Aa(r),e instanceof Te)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Te(e.raw,r);if(e instanceof Dt)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(s=>this.parseRange(s.trim())).filter(s=>s.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let s=this.set[0];if(this.set=this.set.filter(n=>!Xs(n[0])),this.set.length===0)this.set=[s];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&Sa(n[0])){this.set=[n];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let s=((this.options.includePrerelease&&va)|(this.options.loose&&Ca))+":"+e,n=Bs.get(s);if(n)return n;let i=this.options.loose,a=i?J[Z.HYPHENRANGELOOSE]:J[Z.HYPHENRANGE];e=e.replace(a,Ha(this.options.includePrerelease)),U("hyphen replace",e),e=e.replace(J[Z.COMPARATORTRIM],ya),U("comparator trim",e),e=e.replace(J[Z.TILDETRIM],ma),U("tilde trim",e),e=e.replace(J[Z.CARETTRIM],$a),U("caret trim",e);let o=e.split(" ").map(E=>xa(E,this.options)).join(" ").split(/\s+/).map(E=>wa(E,this.options));i&&(o=o.filter(E=>(U("loose invalid filter",E,this.options),!!E.match(J[Z.COMPARATORLOOSE])))),U("range list",o);let u=new Map,g=o.map(E=>new Dt(E,this.options));for(let E of g){if(Xs(E))return[E];u.set(E.value,E)}u.size>1&&u.has("")&&u.delete("");let p=[...u.values()];return Bs.set(s,p),p}intersects(e,r){if(!(e instanceof Te))throw new TypeError("a Range is required");return this.set.some(s=>js(s,r)&&e.set.some(n=>js(n,r)&&s.every(i=>n.every(a=>i.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new da(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Pa(this.set[r],e,this.options))return!0;return!1}};Ws.exports=Te;var Ra=ms(),Bs=new Ra({max:1e3}),Aa=st(),Dt=qs(),U=Fe(),da=be(),{safeRe:J,t:Z,comparatorTrimReplace:ya,tildeTrimReplace:ma,caretTrimReplace:$a}=rt(),{FLAG_INCLUDE_PRERELEASE:va,FLAG_LOOSE:Ca}=tt(),Xs=t=>t.value==="<0.0.0-0",Sa=t=>t.value==="",js=(t,e)=>{let r=!0,s=t.slice(),n=s.pop();for(;r&&s.length;)r=s.every(i=>n.intersects(i,e)),n=s.pop();return r},xa=(t,e)=>(U("comp",t,e),t=Ia(t,e),U("caret",t),t=_a(t,e),U("tildes",t),t=Na(t,e),U("xrange",t),t=Oa(t,e),U("stars",t),t),Y=t=>!t||t.toLowerCase()==="x"||t==="*",_a=(t,e)=>t.trim().split(/\s+/).map(r=>Ta(r,e)).join(" "),Ta=(t,e)=>{let r=e.loose?J[Z.TILDELOOSE]:J[Z.TILDE];return t.replace(r,(s,n,i,a,o)=>{U("tilde",t,s,n,i,a,o);let u;return Y(n)?u="":Y(i)?u=`>=${n}.0.0 <${+n+1}.0.0-0`:Y(a)?u=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:o?(U("replaceTilde pr",o),u=`>=${n}.${i}.${a}-${o} <${n}.${+i+1}.0-0`):u=`>=${n}.${i}.${a} <${n}.${+i+1}.0-0`,U("tilde return",u),u})},Ia=(t,e)=>t.trim().split(/\s+/).map(r=>La(r,e)).join(" "),La=(t,e)=>{U("caret",t,e);let r=e.loose?J[Z.CARETLOOSE]:J[Z.CARET],s=e.includePrerelease?"-0":"";return t.replace(r,(n,i,a,o,u)=>{U("caret",t,n,i,a,o,u);let g;return Y(i)?g="":Y(a)?g=`>=${i}.0.0${s} <${+i+1}.0.0-0`:Y(o)?i==="0"?g=`>=${i}.${a}.0${s} <${i}.${+a+1}.0-0`:g=`>=${i}.${a}.0${s} <${+i+1}.0.0-0`:u?(U("replaceCaret pr",u),i==="0"?a==="0"?g=`>=${i}.${a}.${o}-${u} <${i}.${a}.${+o+1}-0`:g=`>=${i}.${a}.${o}-${u} <${i}.${+a+1}.0-0`:g=`>=${i}.${a}.${o}-${u} <${+i+1}.0.0-0`):(U("no pr"),i==="0"?a==="0"?g=`>=${i}.${a}.${o}${s} <${i}.${a}.${+o+1}-0`:g=`>=${i}.${a}.${o}${s} <${i}.${+a+1}.0-0`:g=`>=${i}.${a}.${o} <${+i+1}.0.0-0`),U("caret return",g),g})},Na=(t,e)=>(U("replaceXRanges",t,e),t.split(/\s+/).map(r=>ba(r,e)).join(" ")),ba=(t,e)=>{t=t.trim();let r=e.loose?J[Z.XRANGELOOSE]:J[Z.XRANGE];return t.replace(r,(s,n,i,a,o,u)=>{U("xRange",t,s,n,i,a,o,u);let g=Y(i),p=g||Y(a),E=p||Y(o),f=E;return n==="="&&f&&(n=""),u=e.includePrerelease?"-0":"",g?n===">"||n==="<"?s="<0.0.0-0":s="*":n&&f?(p&&(a=0),o=0,n===">"?(n=">=",p?(i=+i+1,a=0,o=0):(a=+a+1,o=0)):n==="<="&&(n="<",p?i=+i+1:a=+a+1),n==="<"&&(u="-0"),s=`${n+i}.${a}.${o}${u}`):p?s=`>=${i}.0.0${u} <${+i+1}.0.0-0`:E&&(s=`>=${i}.${a}.0${u} <${i}.${+a+1}.0-0`),U("xRange return",s),s})},Oa=(t,e)=>(U("replaceStars",t,e),t.trim().replace(J[Z.STAR],"")),wa=(t,e)=>(U("replaceGTE0",t,e),t.trim().replace(J[e.includePrerelease?Z.GTE0PRE:Z.GTE0],"")),Ha=t=>(e,r,s,n,i,a,o,u,g,p,E,f,v)=>(Y(s)?r="":Y(n)?r=`>=${s}.0.0${t?"-0":""}`:Y(i)?r=`>=${s}.${n}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Y(g)?u="":Y(p)?u=`<${+g+1}.0.0-0`:Y(E)?u=`<${g}.${+p+1}.0-0`:f?u=`<=${g}.${p}.${E}-${f}`:t?u=`<${g}.${p}.${+E+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),Pa=(t,e,r)=>{for(let s=0;s<t.length;s++)if(!t[s].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let s=0;s<t.length;s++)if(U(t[s].semver),t[s].semver!==Dt.ANY&&t[s].semver.prerelease.length>0){let n=t[s].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}});var Qs=T((_o,Vs)=>{var Gt=be(),Da=Pt(),Ks=Ot(),Ga=(t,e)=>{t=new Da(t,e);let r=new Gt("0.0.0");if(t.test(r)||(r=new Gt("0.0.0-0"),t.test(r)))return r;r=null;for(let s=0;s<t.set.length;++s){let n=t.set[s],i=null;n.forEach(a=>{let o=new Gt(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!i||Ks(o,i))&&(i=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),i&&(!r||Ks(r,i))&&(r=i)}return r&&t.test(r)?r:null};Vs.exports=Ga});var Fa={};ln(Fa,{default:()=>Ma});var P=he("@yarnpkg/core"),pe=he("@yarnpkg/fslib"),Ys=he("@yarnpkg/plugin-essentials"),fe=he("clipanion"),Ut=ut(Kr()),zs=ut(fs()),Js=ut(Qs());var Zs={maxPackageUpdates:!1,preserveSemVerRange:!0},Xe=class extends fe.Command{configFilename=fe.Option.String("--config","semver-up.json");changesetFilename=fe.Option.String("--changeset",{required:!1});dryRun=fe.Option.Boolean("--dry-run",!1);preserveSemVerRange=fe.Option.Boolean("--preserve-semver",!0);include=fe.Option.String("--include",{required:!1});ruleGlobs=fe.Option.Rest();async execute(){try{let e=await P.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:s}=await P.Project.find(e,this.context.cwd),n=await P.Cache.find(e);await r.restoreInstallState();let i=await this.parseConfigFile(),a=async g=>{if(!s&&!this.include)throw new Error("Must be run from within a workspace.");let p=r.workspaces.filter(v=>v.manifest.name).map(v=>P.structUtils.stringifyIdent(v.manifest.name)),E=this.include?new Set((0,Ut.default)(p,this.include).map(v=>r.tryWorkspaceByIdent(P.structUtils.parseIdent(v))).filter(v=>Boolean(v))):new Set([s]);if(!E.size)throw new Error("No workspaces selected.");let f=[];for(let v of E){let $=v.manifest.name?P.structUtils.stringifyIdent(v.manifest.name):"Unknown",d=await g.startTimerPromise(`[${$}] Processing Semver Up Rules`,{skipIfEmpty:!1},async()=>this.getRulesWithPackages({config:i,workspace:v,report:g})),C=await g.startTimerPromise(`[${$}] Finding Updates`,{skipIfEmpty:!1},async()=>this.findUpdateCandidates({workspace:v,rulesWithPackages:d,cache:n,configuration:e,report:g})),x=await g.startTimerPromise(`[${$}] Staging Updates`,{skipIfEmpty:!1},async()=>this.applyUpdates({config:i,workspace:v,rulesWithUpdates:C,report:g}));f.push(x)}E.size>1&&this.changesetFilename?g.reportError(P.MessageName.UNNAMED,"Changesets not supported when targetting more than one workspace."):await g.startTimerPromise("Writing Changeset File",{skipIfEmpty:!0},async()=>{await this.writeChangeset({changeset:f[0]})}),this.dryRun||await r.install({cache:n,report:g})};if(this.changesetFilename==="-"){try{await a(new P.ThrowReport)}catch{return 1}return 0}return(await P.StreamReport.start({configuration:e,stdout:this.context.stdout},a)).exitCode()}catch(e){return this.context.stderr.write(`${String(e)}
`),1}}async parseConfigFile(){let e=pe.ppath.resolve(pe.ppath.cwd(),pe.npath.toPortablePath(this.configFilename)),r={};try{r=P.miscUtils.dynamicRequire(e)}catch{r={rules:[["*",{}]]}}let n={rules:(r?.rules??[]).map(([i,a])=>[i,{...Zs,preserveSemVerRange:this.preserveSemVerRange,...a}]),maxRulesApplied:r?.maxRulesApplied??1,skipManifestOnlyChanges:r?.skipManifestOnlyChanges??!1};if(this.ruleGlobs.length){n.rules=[],n.maxRulesApplied=!1;for(let i of this.ruleGlobs)n.rules.push([i,{...Zs,preserveSemVerRange:this.preserveSemVerRange}])}return n}async getRulesWithPackages({config:e,workspace:r,report:s}){let n=r.manifest,i=e.rules.map(([g,p])=>[g,{rule:p,packages:new Set}]),a=[...n.dependencies.entries(),...n.devDependencies.entries()],o=P.StreamReport.progressViaCounter(a.length),u=s.reportProgress(o);for(let[g,p]of a){let E=i.find(([f])=>(0,Ut.default)([P.structUtils.stringifyIdent(p)],f).length>0);E&&E[1].packages.add(g),o.tick()}return await u,i}async findUpdateCandidates({workspace:e,rulesWithPackages:r,cache:s,configuration:n,report:i}){let a=new Map([...e.manifest.dependencies.entries(),...e.manifest.devDependencies.entries()]),o=new Map;for(let[u,{rule:g,packages:p}]of r){let E=new Map,f=P.StreamReport.progressViaCounter(p.size),v=i.reportProgress(f);for(let $ of p){let d=a.get($);if(!d){f.tick();continue}let C=P.structUtils.parseRange(d.range);if(!(C.protocol===null&&n.get("defaultProtocol")==="npm:"||C.protocol==="npm:")){f.tick();continue}let O=P.structUtils.convertToIdent(d),w=await Ys.suggestUtils.fetchDescriptorFrom(O,g.preserveSemVerRange?d?.range:"latest",{project:e.project,workspace:e,preserveModifier:!0,cache:s});w&&d.range!==w.range&&E.set(O.identHash,w),f.tick()}E.size&&o.set(u,E),await v}return o}getInstalledVersion({descriptorHash:e,project:r}){let s=r.storedResolutions.get(e);if(s){let n=r.storedPackages.get(s);if(n)return n.version}return null}extractVersionFromRange(e){let r=(0,Js.default)(e,{loose:!0});return r?r.version:e}getUpdateType({fromVersion:e,toVersion:r}){if(!e||!r)return null;try{return(0,zs.default)(e,r)}catch{return null}}async applyUpdates({config:e,rulesWithUpdates:r,workspace:s,report:n}){let i=new Map,a=new Map(e.rules),o=0;for(let[u,g]of r.entries()){let p=a.get(u);if(!p)continue;if(e.maxRulesApplied&&o>=e.maxRulesApplied)break;let E=0;for(let[f,v]of g.entries()){if(p.maxPackageUpdates&&E>=p.maxPackageUpdates)break;let $=P.structUtils.stringifyIdent(P.structUtils.convertToIdent(v)),d=s.anchoredPackage.dependencies.get(f);if(!d)continue;let C=P.structUtils.parseRange(d.range).selector,x=P.structUtils.parseRange(v.range).selector,O=this.getInstalledVersion({descriptorHash:d.descriptorHash,project:s.project}),w=this.extractVersionFromRange(x);if(!(O===w&&e.skipManifestOnlyChanges)){i.set($,{fromRange:C,toRange:x,fromVersion:O,toVersion:w,updateType:this.getUpdateType({fromVersion:O,toVersion:w})}),n.reportInfo(P.MessageName.UNNAMED,`[${u}] ${$}: ${C} -> ${x}`);for(let ee of["dependencies","devDependencies"])s.manifest.getForScope(ee).has(f)&&s.manifest.getForScope(ee).set(f,v);this.dryRun||s.project.forgetResolution(d),E+=1}}E&&(o+=1)}return i}async writeChangeset({changeset:e}){if(!this.changesetFilename)return;let r={};for(let[n,i]of e.entries())r[n]={from_version:i.fromVersion,from_range:i.fromRange,to_version:i.toVersion,to_range:i.toRange,update_type:i.updateType,release_notes:null};let s=JSON.stringify(r,null,2);if(this.changesetFilename==="-")this.context.stdout.write(s);else{let n=pe.ppath.resolve(pe.ppath.cwd(),pe.npath.toPortablePath(this.changesetFilename));await pe.xfs.writeFilePromise(n,s,{encoding:"utf8"})}}};lt(Xe,"paths",[["semver","up"]]),lt(Xe,"usage",fe.Command.Usage({description:"",details:"",examples:[]}));var Ua={hooks:{},commands:[Xe]},Ma=Ua;return cn(Fa);})();
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */
return plugin;
}
};
